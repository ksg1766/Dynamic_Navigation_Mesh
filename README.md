---
# ğŸ“… 2024.08.14
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * obstacleì„ ì‚­ì œí•  ë•Œ ë³€ë™í•˜ëŠ” navigation mesh ì •ë³´ë¥¼ agentê°€ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * obstacleì„ ìƒì„±í•  ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ì‚­ì œë  cellë“¤ì„ í¬í•¨í•˜ëŠ” ëª¨ë“  gridì—ì„œ cellì˜ ì •ë³´ë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.
    * ì•„ë˜ëŠ” ì—°ë™í•œ ê²°ê³¼ì…ë‹ˆë‹¤.
      
      ![FPS_61-DEBUG2024-08-1610-53-42-ezgif com-optimize](https://github.com/user-attachments/assets/5b926420-bc5e-4b1a-9833-21a9ac7f8c12)
      
  * ì¶”ê°€ë¡œ, obstacleì„ ìƒì„±í•  ë•Œ, ì´ë¯¸ obstacleì´ ìˆëŠ” ì˜ì—­ê³¼ ê²¹ì¹˜ëŠ” ê²½ìš° obstacleì„ ìƒì„±í•  ìˆ˜ ì—†ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” ì˜ì—­ì´ ê²¹ì¹˜ë©´ í”„ë¡œê·¸ë¨ ì‹¤í–‰ì´ ì¤‘ë‹¨ëìŠµë‹ˆë‹¤.

    ![FPS_61-DEBUG2024-08-1611-21-23-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/730bf0f4-3c04-4966-93cc-a6935ef8c2e0)
    
    * ì™¸ê³½ì„ ì˜ êµì°¨ì ì´ í•˜ë‚˜ë¼ë„ ê²€ì¶œë˜ë©´ obstacleì„ ìƒì„±í•˜ì§€ ì•Šë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. êµì°¨ì ì„ ê²€ì¶œí•˜ëŠ” ë°©ë²•ì€ ì´ì „ì— obstacle ì™¸ê³½ì„  í™•ì¥ì„ êµ¬í˜„í–ˆì„ ë•Œ êµì°¨ì ì„ ì œê±°í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ê³¼ ê°™ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
		```
		_int CNavMeshView::IntersectSegments(const Vec3& vP1, const Vec3& vQ1, const Vec3& vP2, const Vec3& vQ2, Vec3* pIntersection)
		{
			Vec3 vSour = { vQ1.x - vP1.x, 0.0f, vQ1.z - vP1.z };
			Vec3 vDest = { vQ2.x - vP2.x, 0.0f, vQ2.z - vP2.z };

			_float fSxD = vSour.x * vDest.z - vSour.z * vDest.x;
			_float fPQxR = (vP2.x - vP1.x) * vSour.z - (vP2.z - vP1.z) * vSour.x;

			if (fabs(fSxD) < 1e-5f)
			{
				return 0; // Parallel
			}

			_float fT = ((vP2.x - vP1.x) * vDest.z - (vP2.z - vP1.z) * vDest.x) / fSxD;
			_float fU = fPQxR / fSxD;

			if (fT >= 0.0f && fT <= 1.0f && fU >= 0.0f && fU <= 1.0f)
			{
				if (nullptr != pIntersection)
				{
					*pIntersection = { vP1.x + fT * vSour.x, 0.0f, vP1.z + fT * vSour.z };
				}

				return 1;
			}

			return -1;
		}
		```
    
  * obstacleì„ ìƒì„±í•  ë•Œ, í•´ë‹¹ ì˜ì—­ì— agentê°€ ìœ„ì¹˜í•´ ìˆë‹¤ë©´ ê°€ì¥ìë¦¬ë¡œ ë°€ë ¤ë‚˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    
    ![FPS_61-DEBUG2024-08-1610-55-08-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/3bd8680c-99da-4963-a12e-3eedfc5708ee)
    
  * ê²½ë¡œ íƒìƒ‰ ì¤‘ì— ìƒˆë¡œ ìƒì„±ëœ obstacleì´ í˜„ì¬ ê²½ë¡œë¥¼ ê°€ë¡œë§‰ëŠ”ë‹¤ë©´ ê²½ë¡œë¥¼ ë‹¤ì‹œ íƒìƒ‰í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    
    ![FPS_61-DEBUG2024-08-1610-26-15-ezgif com-optimize](https://github.com/user-attachments/assets/3bdfe464-d136-4a07-8c08-a5a036ff72cd)

    * ìš°ì„ ì€ ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨íˆ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. agentëŠ” ìµœì¢… ê²°ì •ëœ pathì˜ cellì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ”ë°, obstacleì˜ ìƒì„± ë° ì‚­ì œ ì‹œ ìƒˆë¡œ ìƒì„±ëœ cellì´ ì¶”ê°€ë˜ê¸° ì „, ì´ë¯¸ ìˆë˜ cellì´ ì‚­ì œ ë˜ëŠ” ì‘ì—…ì€ í•´ë‹¹ í”„ë ˆì„ì˜ ë§ˆì§€ë§‰ì— ìˆ˜í–‰ë˜ë¯€ë¡œ
      ì´ë¯¸ ê²½ë¡œë¡œ ì§€ì •ëœ cellë“¤ì¤‘ í•˜ë‚˜ë¼ë„ ì‚­ì œ ì˜ˆì • ì—¬ë¶€ê°€ í™•ì¸ë˜ë©´ ê²½ë¡œë¥¼ ì¬ê²€ìƒ‰í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ì´í›„ì— agent ìˆ˜ë¥¼ ëŠ˜ë ¤ê°€ë©° ê³„ì†í•´ì„œ í™•ì¸í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.
      
		```
		for (_int i = 0; i < m_dqPath.size(); ++i)
		{
			if (true == m_dqPath[i].first->isDead)
			{
				if (true == AStar())
				{
					FunnelAlgorithm();
					break;
				}
			}
		}
		```

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
   * agentê°€ ì´ë™ì¤‘ì¼ ë•Œ obstacleì´ agentì™€ ê²¹ì³ì„œ ìƒì„±ë˜ë©´ ê²½ë¡œë¥¼ ì¬ê²€ìƒ‰í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„ í™•ì¸í•˜ê³ ì í•©ë‹ˆë‹¤.
 
âš½ ì´í›„ ê³„íš
  * ìœ„ì— ì–¸ìŠµí•œ agentê°€ ì´ë™ì¤‘ì¼ ë•Œ obstacleì´ agentì™€ ê²¹ì³ì„œ ìƒì„±ë˜ë©´ ê²½ë¡œë¥¼ ì¬ê²€ìƒ‰í•˜ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ ìˆ˜ì •í•  ê³„íšì…ë‹ˆë‹¤.
  * í˜„ì¬ í™˜ê²½ì—ì„œ agentì˜ ìˆ˜ë¥¼ ëŠ˜ë ¤ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆë„ë¡ í™˜ê²½ì„ ìˆ˜ì •í•  ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.08.13
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ì£¼ê°„ íšŒì˜ í”¼ë“œë°±ì— ë”°ë¼ ì–´ì œê¹Œì§€ ì‘ì—…í•˜ë˜ HNAStar êµ¬í˜„ì— ëŒ€í•´ í•œ ë²ˆ ë” ì¬ê³ í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
    * agentì˜ ì›€ì§ì„ì— ëŒ€í•œ ë¬¸ì œë¥¼ ì¶”ê°€ë¡œ ìˆ˜ì •í•´ ë³´ë ¤ í–ˆìœ¼ë‚˜ ë§ì€ ë¶€ë¶„ì„ ìˆ˜ì •í•´ì•¼ í•  ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤.
    * HNAStarë¥¼ ì§€ê¸ˆê¹Œì§€ì˜ ê³¼ì • ì¤‘ ì˜ˆìƒí•˜ì§€ ëª»í–ˆë˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ë° ë§ì€ ì‹œê°„ì´ ë“¤ì—ˆë˜ ê²ƒì„ ìƒê°í–ˆì„ ë•Œ ìš°ì„  ì´ì „ì˜ ì‘ì—…ë“¤ì„ ë§ˆë¬´ë¦¬í•œ ë’¤ ì¶”ê°€ ì‚¬í•­ì„ ìƒê°í•´ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
    * ë”°ë¼ì„œ ìš°ì„  ë³´ë¥˜í•˜ê³  êµ¬í˜„ëœ Dynamic Obstacleê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì„ ìš°ì„  ë§ˆë¬´ë¦¬í•´ ë³´ë ¤ í•©ë‹ˆë‹¤.
      
  * ì‹¤í–‰ ì¤‘ì— dynamic obstacle ì¶”ê°€ ì‹œ ë³€ê²½ë˜ëŠ” navigation mesh ì •ë³´ë¥¼ agentê°€ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * obstacleì´ ì¶”ê°€ë˜ëŠ” ì˜ì—­ì— ìƒˆë¡­ê²Œ ìƒì„±ëœ cellì„ ì¶”ê°€í•˜ê¸° ì „ì— ì´ë¯¸ ì¡´ì¬ í•˜ë˜ cellì„ ì‚­ì œí•˜ëŠ” ë°©ì‹ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
      * í˜„ì¬ ê²€ìƒ‰ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ grid í˜•íƒœë¡œ cellì„ ì €ì¥í•˜ê³  ìˆìœ¼ë¯€ë¡œ, í•´ë‹¹ cellì„ í¬í•¨í•˜ëŠ” ëª¨ë“  gridì—ì„œ ì¤‘ë³µìœ¼ë¡œ ì €ì¥ë¼ ìˆëŠ” cellì •ë³´ë¥¼ ì‚­ì œí•´ì•¼ ì´í›„ì˜ ê²€ìƒ‰ ì‘ì—…ì„ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      * ì´ì „ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ obstacleì„ í¬í•¨í•˜ëŠ” ì˜ì—­ì—ì„œ cellì˜ ì •ë³´ë¥¼ ì œê±°í–ˆëŠ”ë°, cellì˜ í¬ê¸°ì— ë”°ë¼ ë‹¤ë¥¸ gridì—ë„ ê±¸ì³ìˆëŠ” ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ì¢€ ë” ë„“ì€ gridì—ì„œ cellì„ ì „ë¶€ ì‚­ì œí•´ì•¼ í–ˆìŠµë‹ˆë‹¤.
        
        ![image](https://github.com/user-attachments/assets/1d2a6ab1-1754-4108-b022-f8076f2537ba)

      * ë”°ë¼ì„œ ì•„ë˜ì™€ê°™ì´ ìƒˆë¡œ ìƒì„±ëœ cellë“¤ì´ ê±¸ì³ ìˆëŠ” ë” ë„“ì€ ì˜ì—­ì˜ gridì— ëŒ€í•´ ì¤‘ë³µëœ cell ì •ë³´ë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.

        ![image](https://github.com/user-attachments/assets/37ad9e92-1a27-4fd6-aed1-e2d9f417af33)

      * ì ìš©ëœ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

        ![FPS_61-DEBUG2024-08-1411-07-09-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/a102a427-8080-47f1-ba4f-7b5bcd5265e1)
  
âš½ ì´í›„ ê³„íš
  * obstacle ìƒì„±ë³´ë‹¤ ì‚­ì œ ê³¼ì •ì´ ì¡°ê¸ˆ ë” ë³µì¡í•œë°, ìš°ì„  ì—°ë™í•  ê³„íšì…ë‹ˆë‹¤.
  * ê²½ë¡œ íƒìƒ‰ ê³¼ì • ì¤‘ navigation mesh ë³€ë™ì— ë”°ë¼ ê²½ë¡œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  
---
6ì£¼ì°¨ ì§„í–‰ ë‚´ìš© : https://equal-paw-e8f.notion.site/6-c6516ea0a7e140be9f5663cc934ab07e?pvs=4

---
# ğŸ“… 2024.08.12
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ë‘ ë©”ì‰¬ë¥¼ ì—°ê²°í•˜ëŠ” ê²½ì‚¬ë©´ì„ êµ¬ì„±í•˜ëŠ” ëŒ€ì‹  ì•„ì˜ˆ ë‹¨ì ˆëœ í˜•íƒœë¡œ ë‘ê³  íŠ¹ì • portal ì§€ì ì„ í†µí•´ì„œë§Œ ì„œë¡œ ì´ë™ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

    ![image](https://github.com/user-attachments/assets/90dcee77-011e-41fe-ab8b-509fba35d677)
    
    ![image (1)](https://github.com/user-attachments/assets/60ca7137-9500-4258-8ef1-5d2247b5a1fa)

 * Portalì€ 1:Nìœ¼ë¡œ ì—°ê²°ë¼ìˆìœ¼ë©°, ëª©ì ì§€ê°€ ë‹¤ë¥¸ levelì— ìˆì„ ê²½ìš° ë‹¤ìŒ ë…¸ë“œì™€ ì—°ê²°ëœ Portalì˜ ìŒì„ ì°¾ì•„ waypointë¡œ ì •í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ AStarë¥¼ ìˆ˜í–‰í•´ Navigation Meshê°„ ì´ë™ê°€ëŠ¥í•œ ê²½ë¡œë¥¼ íƒìƒ‰í•˜ê³ , ê° waypoint ì‚¬ì´ êµ¬ê°„ì—ì„œ AStarë¥¼ ë‹¤ì‹œ ìˆ˜í–‰í•´ ì„¸ë¶€ ê²½ë¡œë¥¼ íƒìƒ‰í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * í˜„ì¬ ë„ì°©ì§€ì ê¹Œì§€ì˜ NodeëŠ” ì •ìƒì ìœ¼ë¡œ íƒìƒ‰ì´ ë˜ì§€ë§Œ agentì˜ level ì´ë™ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì•„ ìˆì–´ ìˆ˜ì • ì¤‘ì…ë‹ˆë‹¤.
 
âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ ìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•´ agentê°€ ì •ìƒì ìœ¼ë¡œ levelì„ ì´ë™ì„ ê²½ë¡œíƒìƒ‰ê³¼ í•¨ê»˜ ê³ ë ¤í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•  ê³„íšì…ë‹ˆë‹¤.
    
---
# ğŸ“… 2024.08.09
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ì”¬ì„ êµ¬ì„±í•˜ê³  ë‹¨ì ˆëœ í˜•íƒœì˜ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
    * ì´ˆê¸°ì— ì‚¬ìš©í–ˆë˜ ì”¬ì´ ê°€ì¥ í™˜ê²½ì„ ì œì‘í•˜ê¸° ì¢‹ì„ ê²ƒ ê°™ì•„ ë§ˆì§€ë§‰ê¹Œì§€ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. mesh ë¡œë”©ì´ ë§¤ìš° ì˜¤ë˜ ê±¸ë ¸ì—ˆëŠ”ë° ë„¤ë¹„ê²Œì´ì…˜ì— í•„ìš”í•˜ì§€ ì•Šì€ ë©”ì‰¬ì™€ ì •ì ì„ ì¼ë¶€ ì œê±°í•œ í›„ ë‹¤ì‹œ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
    * í•´ë‹¹ ì”¬ì—ì„œ ì¶”ì¶œí•œ obstacleì„ ì´ìš©í•´ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ë¥¼ ì œì‘í•˜ê³  ê±´ë¬¼ì˜ ì˜¥ìƒê³¼ ê°™ì€ í‰í‰í•œ ì§€í˜•ì— ìƒˆë¡œìš´ ë©”ì‰¬ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
    * í˜„ì¬ êµ¬ì„±ëœ í˜•íƒœëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

      ![image](https://github.com/user-attachments/assets/045043a6-96e4-4642-b557-2a77f4fe936a)

    * ìœ„ì—ì„œ base levelë¥¼ ì œì™¸í•œ ë¶„ë¦¬ëœ ë©”ì‰¬ì˜ í˜•íƒœì…ë‹ˆë‹¤. í™˜ê²½ êµ¬ì„±ì— ì˜ˆìƒë³´ë‹¤ ì‹œê°„ì„ ë§ì´ ì‚¬ìš©í•˜ê²Œ ë¼ ìš°ì„  ë‹¨ìˆœí•œ í˜•íƒœë¡œ êµ¬ì„±í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

      ![image](https://github.com/user-attachments/assets/4e9ad441-4f0b-4a16-af80-b841c2ded1e1)
      
    * ê¸°ì¡´ ë©”ì‰¬ ìœ„ì— ë³„ë„ì˜ ë©”ì‰¬ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ triangle libì˜ ì‚¼ê°í˜• ìƒì„±ì„ ìœ„í•œ ë²„í¼ë¥¼ ìƒì„±í•˜ëŠ” ì‘ì—…ì´ ì¡°ê¸ˆ ì˜¤ë˜ê±¸ë ¸ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
    * í˜„ì¬ëŠ” agentê°€ ë¶„ë¦¬ëœ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ì—ì„œ ê²½ë¡œë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆë„ë¡ ìƒìœ„ ë…¸ë“œ ë‹¨ìœ„ì—ì„œ ì—°ê²°í•  edgeë¥¼ ì„¤ì •í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.


âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ agentê°€ ë¶„ë¦¬ëœ ë…¸ë“œ ë‹¨ìœ„ì—ì„œ ê²½ë¡œë¥¼ ì ì ˆíˆ ì°¾ì•„ levelì„ ì´ë™í•˜ë©° ê²½ë¡œë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆë„ë¡ ì—°ê²°í•˜ëŠ”ë° ì§‘ì¤‘í•  ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.08.08
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ë‹¨ìˆœ ê²½ì‚¬ ë¿ ì•„ë‹ˆë¼ ë†’ì´ ì°¨ì´ì— ì˜í•´ navigation meshê°€ ë‹¨ì ˆëœ ê²½ìš°ë¥¼ í•¨ê»˜ ê³ ë ¤í•˜ê¸° ìœ„í•œ í™˜ê²½ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤. 
    * ì‘ì—… ì¤‘ì´ë˜ height map terrainì—ì„œ navigation meshë¥¼ ìƒì„±í•œ ê²°ê³¼ê°€ ì˜ˆìƒë³´ë‹¤ ì •í™•ë„ê°€ ë¶€ì¡±í•˜ê¸°ë„ í•˜ê³  ë‚¨ì€ ê¸°ê°„ì„ ë” í™œìš©í•´ ë³´ê³ ì í•´ë‹¹ ì‘ì—…ì„ ì ì‹œ ì¤‘ë‹¨í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

  * AStarì˜ ê°œì„ ëœ í˜•íƒœ ì¤‘ í•˜ë‚˜ì¸ HPA*ë¥¼ í†µí•´ ë‹¨ì ˆë¼ìˆê±°ë‚˜ ë†’ì´ ì°¨ì´ê°€ ìˆëŠ” ë³µì¸µ í˜•íƒœì˜ navmeshì—ì„œì˜ path findingì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒì„ ì•Œê²Œ ëìŠµë‹ˆë‹¤.
    * ë§ˆì¹¨ ì–¼ë§ˆì „ ìµœì í™” ë°©ë²•ë“±ì„ í•™ìŠµí•˜ê¸° ìœ„í•´ gridê°€ ì•„ë‹Œ navigation meshì—ì„œ ìˆ˜í–‰ë˜ëŠ” [Hierarchical Path-Finding for Navigation Meshes (HNA*)] ìë£Œë¥¼ ì ì‹œ í•™ìŠµí–ˆì—ˆëŠ”ë° ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê³ ì í•´ë‹¹ ìë£Œì™€ ê´€ë ¨ ìë£Œë¥¼ ì¶”ê°€ í•™ìŠµì¤‘ì…ë‹ˆë‹¤.
      * Path Planning for Complex 3D Multilevel Environments (Leonel Deusdado et al.)
      * Near Optimal Hierarchical Path-Finding (Adi Botea et al.)
     
  * navigation cellë“¤ì„ ê·¸ë˜í”„ í˜•íƒœë¡œ ì €ì¥í•´ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê³„ì¸µ êµ¬ì¡°ë¥¼ í˜•ì„±í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ë¶„ë¦¬ëœ meshë¥¼ low levelì˜ nodeë¡œ êµ¬ì„±í•´ ë…¸ë“œê°„ ì´ë™ ë¹„ìš©ì„ ê³„ì‚°í•  ê³„íšì…ë‹ˆë‹¤.
    
    ![image](https://github.com/user-attachments/assets/09d34c7b-beeb-4854-a2cf-4f98d30a4462)
    ![image](https://github.com/user-attachments/assets/a583460b-7524-4c7e-9638-47324a3cd493)

  * ìµœì¢…ì ìœ¼ë¡œ êµ¬ì„±í•  3D meshë¥¼ ì¶”ê°€ë¡œ ì°¾ëŠ” ì¤‘ì…ë‹ˆë‹¤. ë Œë”ëŸ¬ì—ì„œ .fbx íŒŒì¼ì„ ë°”ì´ë„ˆë¦¬í™”í•´ì„œ ì‚¬ìš©ì¤‘ì´ê¸° ë•Œë¬¸ì— ì œì•½ì‚¬í•­ë“¤ì´ ì¡°ê¸ˆ ìˆì—ˆëŠ”ë°, í•„ìš”í•  ê²½ìš° ì¶”ê°€ ì‘ì—…ì„ í†µí•´ ê¸°ëŠ¥ë¶€í„° ìš°ì„  êµ¬í˜„í•´ë³¼ ìƒê°ì…ë‹ˆë‹¤.

    * ì•„ë˜ì™€ ê°™ì€ ì´ì „ì— ì œì‹œí•´ì£¼ì…¨ë˜ ì˜¤í”ˆ ë¦¬ì†ŒìŠ¤ë“¤ì„ í¬í•¨í•´ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
      
      ![123](https://github.com/user-attachments/assets/384d6dea-15b1-4ed3-8f69-33ba24539cfa)

âš½ ì´í›„ ê³„íš
  * ë‹¨ì ˆëœ ë„¤ë¹„ê²Œì´ì…˜ í™˜ê²½ì„ êµ¬ì„±í•´ hierarchical navigation meshesë¥¼ ì ìš©í•  ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.08.07
ğŸ“‹ ì§„í–‰ ì‚¬í•­
* AStar ìˆ˜í–‰ ì‹œ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ê³„ì‚° íšŸìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ í†µë¡œì˜ í­ê³¼ ê°ë„ë¥¼ ë¯¸ë¦¬ ê³„ì‚°í•´ ì €ì¥í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
  * ê°™ì€ ê²½ë¡œì—ì„œ ì´ì „ì— ë¹„í•´ ì•½ 30% ì •ë„ì˜ ì†ë„ í–¥ìƒì´ ìˆì—ˆìŠµë‹ˆë‹¤.
  * í†µê³¼í•˜ëŠ” portal ìˆ˜ ëŒ€ë¹„ AStar ìˆ˜í–‰ ì‹œê°„ì€ ëŒ€ëµ (82 / ~140us), (115 / ~200us), (162 / ~260us), (79 / ~110us) ì™€ ê°™ì´ ì†Œìš”ë˜ê³  ìˆìŠµë‹ˆë‹¤.
    * ì•„ë˜ ì‘ì—… ì§„í–‰ í›„ì—ë„ ë” ê°œì„ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì§€ì†ì ìœ¼ë¡œ ê³ ë¯¼í•´ë³´ê² ìŠµë‹ˆë‹¤.

* 3D í™˜ê²½ì—ì„œ agentê°€ ê²½ë¡œë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  * g-Valueë° íœ´ë¦¬ìŠ¤í‹±ì„ ê³„ì‚°í•  ë•Œ y-axisì˜ ê±°ë¦¬ë¥¼ í•¨ê»˜ ê³ ë ¤í•˜ë„ë¡ ë³€ê²½í•  ê³„íšì…ë‹ˆë‹¤.
  * slopeì™€, height ì°¨ì´ ë“±ì„ ê³ ë ¤í•´ ê²½ë¡œë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  * í˜„ì¬ëŠ” ì•„ë˜ì™€ ê°™ì€ ë†’ì´ê°€ ì¼ì •í•˜ì§€ ì•Šì€ terrainì— ëŒ€í•´ navigation meshë¥¼ 3D ìƒì„±í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤.

    ![image](https://github.com/user-attachments/assets/e30f75d1-3c55-4f3b-bfc6-c2f6f4b06dd1)
    
  * ì§€í˜•ì˜ ë†’ì´ì— ë”°ë¼ meshê°€ ë¶„í•  ìƒì„±ë˜ëŠ” ë¶€ë¶„ê¹Œì§€ í™•ì¸í–ˆìœ¼ë‚˜ ì•„ì§ ì¼ë¶€ ì‘ì—…(ë³„ë„ë¡œ ì €ì¥ë˜ê³  ìˆëŠ” yê°’ ì ìš© ë° ë°ì´í„° ì €ì¥ ë“±)ì´ ë‚¨ì•„ ë§ˆì € ì§„í–‰ì¤‘ì…ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ ìš°ì„  3D navigation mesh ìƒì„± ì‘ì—…ë¶€í„° ë§ˆë¬´ë¦¬í•  ê³„íšì…ë‹ˆë‹¤. ì´í›„ ê²½ë¡œ ë¹„ìš© ê³„ì‚° ë° ê¸°ëŠ¥ì„ ë³€ê²½í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

---
# ğŸ“… 2024.08.06
ğŸ“‹ ì§„í–‰ ì‚¬í•­ 
  * í˜„ì¬ ìƒíƒœì—ì„œ A*ì˜ ì„±ëŠ¥ì„ í™•ì¸í•œ ê²°ê³¼ ì´ì „ì— ê°™ì€ ê²½ë¡œì—ì„œ ì¸¡ì •í–ˆë˜ ê²°ê³¼ì— ë¹„í•´ ì•½ 2ë°° ì •ë„ì˜ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. (í‰ê·  ë²”ìœ„ 50-100us -> 100-150us)
    * ì–´ì œ íšŒì˜ì‹œê°„ì— ë§ì”€í•´ ì£¼ì‹  ì‚¬í•­ì²˜ëŸ¼, í†µë¡œì˜ í­ì„ ì¸¡ì •í•˜ê³  ë¹„ìš©ì„ ê³„ì‚°í•˜ëŠ” ê³¼ì •ì´ ë” ë³µì¡í•´ì§„ ê²ƒì— ë¹„í•´ ëª¨ë“  ë…¸ë“œì— ëŒ€í•´ ë¹„ìš©ì„ ë§¤ë²ˆ ê³„ì‚°í•˜ê³  ìˆëŠ” ê²ƒì´ ë¹„íš¨ìœ¨ì ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
    * Recast ë“±ì—ì„œë„ ë©”ì‰¬ë¥¼ agentì˜ sizeì— ëŒ€í•´ bakeí•  ë•Œ ì´ëŸ° ë¹„ìš©ì„ ë¯¸ë¦¬ ê³„ì‚°í•´ë‘ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²ŒëìŠµë‹ˆë‹¤. ì´ëŸ° ê³¼ì •ì´ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë°©ì‹ì— ëŒ€í•´ ê³ ë¯¼ì´ ë¶€ì¡±í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
    * í˜„ì¬ ì œ í”„ë¡œì íŠ¸ì—ì„œë„ í†µë¡œ í­ì´ë‚˜ g-value ê³„ì‚° ê³¼ì • ì¤‘ ë¯¸ë¦¬ ê³„ì‚°í•´ ë‘˜ ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ì´ ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
    * ì´ì „ì— êµ¬í˜„í•œ obstacleë¡œë¶€í„° ê²½ë¡œë¥¼ radiusë§Œí¼ ì´ê²©í•˜ëŠ” ë°©ì‹ ë˜í•œ ì‹¤ì‹œê°„ ë¹„ìš©ì´ ì†Œëª¨ë˜ê³  ìˆëŠ”ë° ì¡°ê¸ˆ ë³µì¡í•˜ê²Œ í•´ê²°í•˜ë ¤ê³  í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
      ì´ì™€ ê°™ì€ ë¶€ë¶„ë“¤ì„ ìµœëŒ€í•œ ì°¾ì•„ ìš°ì„  ê°œì„ ì„ ì§„í–‰í•´ë³´ê³  ìˆìŠµë‹ˆë‹¤.
  * í˜„ì¬ ì‘ì—… í™˜ê²½ì´ 2Dê³µê°„ê³¼ í° ì°¨ì´ê°€ ì—†ëŠ” ê²ƒ ê°™ì•„ ë„¤ë¹„ê²Œì´ì…˜ í™˜ê²½ì„ êµ¬ì„±í•  ì ì ˆí•œ 3Dí™˜ê²½ì„ ì¶”ê°€ë¡œ íƒìƒ‰ ì¤‘ì…ë‹ˆë‹¤.
  
âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ ë°ì´í„° ê³„ì‚° ë¹„ìš©ì„ ì¤„ì´ëŠ” ì‘ì—…ì„ ë§ˆì € ì§„í–‰í•˜ê³  ì§€í˜• ë° í™˜ê²½ì„ ë‹¤ì‹œ êµ¬ì„±í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.
  * ì„±ëŠ¥ ê°œì„ ê³¼ í™˜ê²½ì— ëŒ€í•´ì„  ê³„ì† ê³ ë¯¼í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

---
5ì£¼ì°¨ ì§„í–‰ ë‚´ìš© : https://equal-paw-e8f.notion.site/5-6b429686a9924cf6bec13121e2481399?pvs=4

---
# ğŸ“… 2024.08.05
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ê²½ë¡œ íƒìƒ‰ì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ë°©ë²•ì„ ì°¾ì•„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ìë£Œë¥¼ ì°¾ê³  í•™ìŠµì¤‘ì…ë‹ˆë‹¤.
  * ì§€ê¸ˆì€ ì•„ë˜ì™€ ê°™ì€ ìë£Œë“¤ì„ í†µí•´ ê²½ë¡œ íƒìƒ‰ì˜ ì„±ëŠ¥ì„ í–¥ìƒ ì‹œí‚¬ ë°©ë²•ì„ ì°¾ê³  í•™ìŠµì¤‘ì…ë‹ˆë‹¤.
    * [Efficient Triangulation-Based Pathfindin. Chapter 6.](https://skatgame.net/mburo/ps/thesis_demyen_2006.pdf#page=82)
    * [Hierarchical Path-Finding for Navigation Meshes (HNA*)](https://upcommons.upc.edu/bitstream/handle/2117/98738/Pelechano_HNAstar_prePrint.pdf)
  
âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ~~êµ¬í˜„í•œ Funnelì•Œê³ ë¦¬ì¦˜ì´ ì¼ë¶€ ê¸‰ê²©í•œ ì½”ë„ˆë“±ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ìƒí™©ì´ ê°„í˜¹ ë°œìƒí•©ë‹ˆë‹¤.~~ -> ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
      ![image](https://github.com/user-attachments/assets/21ca8988-a9bd-4155-a424-1e6d80f408be)
  
âš½ ì´í›„ ê³„íš
  * ê²½ë¡œ íƒìƒ‰ì˜ ì„±ëŠ¥ì„ í–¥ìƒí‚¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ê³  ì ìš©í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.
  * ~~ë‹¤ë§Œ ì§ì ‘ êµ¬í˜„í•œ Funnelì•Œê³ ë¦¬ì¦˜ì´ ì¼ë¶€ ê¸‰ê²©í•œ ì½”ë„ˆë“±ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ìƒí™©ì´ ê°„í˜¹ ìˆì–´ [4.5 Modified Funnel Algorithm](https://skatgame.net/mburo/ps/thesis_demyen_2006.pdf#page=71)ì— ì œì•ˆëœ ì˜ì‚¬ì½”ë“œë¥¼ ì°¸ê³ í•´ ìˆ˜ì •í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.~~ -> ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
  * ì´ì „ê¹Œì§€ êµ¬í˜„í–ˆë˜ Dynamic Obstacle í™˜ê²½ì„ í•¨ê»˜ ì ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  
---
# ğŸ“… 2024.08.02
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * agentê°€ ì´ë™ í†µë¡œì˜ ì‹¤ì œ ë„ˆë¹„ë¥¼ ê³ ë ¤í•´ ê²½ë¡œë¥¼ íƒìƒ‰í•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * ì§„ì…í•˜ëŠ” ì‚¼ê°í˜• edgeì˜ ì–‘ìª½ ëì—ì„œ agentì˜ radiusë¥¼ ëº¸ ê¸¸ì´ë¥¼ portalì˜ ì…êµ¬ í¬ê¸°ì´ì í†µë¡œì˜ ë„ˆë¹„ë¡œ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.
    * ê·¸ ê²°ê³¼ ì•„ë˜ì™€ ê°™ì´ í†µë¡œì˜ ì‹¤ì œ ë„ˆë¹„ëŠ” ì§§ì€ í™”ì‚´í‘œì˜ ê¸¸ì´ì™€ ê°™ì§€ë§Œ, portal ì…êµ¬ì˜ í¬ê¸°ëŠ” ê¸´ í™”ì‚´í‘œì˜ ê¸¸ì´ë¡œ ì„¤ì •ë¼, agentê°€ ì§€ë‚˜ê°ˆ ìˆ˜ ì—†ì„ ì •ë„ë¡œ ì‘ì€ í†µë¡œê°€ ê²½ë¡œì— í¬í•¨ë˜ëŠ” í˜„ìƒì´ ìˆì—ˆìŠµë‹ˆë‹¤.
    * ë˜í•œ ì…êµ¬ì˜ í¬ê¸°ëŠ” ì¶©ë¶„íˆ í¬ì§€ë§Œ ì´í›„ í­ì´ ì¢ì•„ì§€ëŠ” í˜•íƒœì˜ í†µë¡œê°€ ê²½ë¡œì— í¬í•¨ë  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/aed8e6ed-6eff-410b-b13b-26db11abe5bf)
      
      ![image](https://github.com/user-attachments/assets/24f588d1-b5cb-4316-ad71-0c032ca11dc6)

    * [Efficient Triangulation-Based Pathfindin. (Douglas Jon Demyen)](https://skatgame.net/mburo/ps/thesis_demyen_2006.pdf#page=43) ì˜ 4.1ì ˆì„ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤. ê³ ë ¤í•˜ê³ ì í•˜ëŠ” caseëŠ” í¬ê²Œ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/3cfa009d-a033-426e-9240-0e6fb98c105f)
      
      ![image](https://github.com/user-attachments/assets/9c793406-48d2-4782-952d-cc7da9b61313)
      
      ![image](https://github.com/user-attachments/assets/fccd0a0f-522f-49d5-ab05-1b84d60f7d88)

    * ì†ŒìŠ¤ ì½”ë“œ êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ë³€ìˆ˜ ì´ë¦„ì€ ì ì‹œ ì˜ì‚¬ ì½”ë“œì™€ ì¼ê´€ì„±ìˆê²Œ ì„ ì–¸í–ˆìŠµë‹ˆë‹¤.

	```
	_float CellData::CalculateWidth(LINES eLine1, LINES eLine2)
	{
		if (eLine1 == eLine2)
			return -FLT_MAX;

		POINTS C = POINTS((5 - eLine1 - eLine2) % 3);
		POINTS A = POINTS((C + 1) % 3);
		POINTS B = POINTS((C + 2) % 3);
	
		LINES c = LINES(3 - eLine1 - eLine2);
	
		_float d = ::min(
			(vPoints[c] - vPoints[C]).Length(),
			(vPoints[(c + 1) % 3] - vPoints[C]).Length());

		if (IsObtuse(vPoints[C], vPoints[A], vPoints[B]) || IsObtuse(vPoints[C], vPoints[B], vPoints[A]))
			return d;
		else if (nullptr == pNeighbors[c])	// isConstrained : ë§‰í˜€ìˆë‹¤ë©´
			return CostBetweenPoint2Edge(vPoints[C], vPoints[A], vPoints[B]);
		else
			return SearchWidth(vPoints[C], this, c, d);
	}
	```
  
  	```
   	_float CellData::SearchWidth(const Vec3& C, CellData* T, LINES e, _float d)
	{
		const Vec3& U = T->vPoints[e];
		const Vec3& V = T->vPoints[(e + 1) % 3];

		if (IsObtuse(C, U, V) || IsObtuse(C, V, U))
			return d;

		_float _d = CostBetweenPoint2Edge(C, U, V);

		if (_d > d)
			return d;
		else if (nullptr == T->pNeighbors[e])	// isConstrained : ë§‰í˜€ìˆë‹¤ë©´
			return _d;
		else
		{
			CellData* _T = T->pNeighbors[e];

			LINES _e1 = LINE_END, _e2 = LINE_END;

			for (uint8 i = 0; i < LINE_END; ++i)
			{
				if (T != _T->pNeighbors[i])
					(LINE_END == _e1) ? _e1 = (LINES)i : _e2 = (LINES)i;
			}

			d = SearchWidth(C, _T, _e1, d);
			return SearchWidth(C, _T, _e2, d);
		}
	}
   	```

  * agentê°€ í†µë¡œì˜ ê°€ì¥ìë¦¬ë¡œë¶€í„° radiusë§Œí¼ì˜ ê°„ê²©ì„ ë‘ê³  ì´ë™í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * ê¸°ì¡´ì˜ êµ¬í˜„ ë°©ì‹ì—ì„œëŠ” ì•ì„œ ì—…ë¡œë“œí•œ ì‚¬ì§„ì²˜ëŸ¼ entry edgeì˜ ê¸°ìš¸ê¸°ì— ë”°ë¼ ê²½ë¡œê°€ ë²½ì— ê°€ê¹Œì´ í˜•ì„±ë˜ëŠ” ê²½ìš°ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    * ì‚¼ê°í˜• cellì˜ edgeì™€ì˜ ì¶©ëŒì„ ê²€ì‚¬í•´ ë°€ì–´ë‚´ëŠ” ë°©ì‹ì„ êµ¬í˜„í•˜ë ¤ í–ˆìœ¼ë‚˜, ìœ„ì˜ í†µë¡œ ë„ˆë¹„ë¥¼ ê³„ì‚°í•  ë•Œì™€ ê°™ì´, í˜„ì¬ cellì˜ edgeê°€ ë§‰í˜€ìˆëŠ” ê²½ìš°, ë§‰í˜€ìˆì§€ ì•Šì§€ë§Œ ì¸ì ‘í•œ cellì˜ ë„ˆë¹„ê°€ ì¢ê³  edgeê°€ ë§‰í˜€ìˆëŠ” ê²½ìš°, ì¸ì ‘ cellì˜ ë„ˆë¹„ê°€ ë„“ê³  edgeê°€ ë§‰í˜€ìˆëŠ” ê²½ìš° ë“±ë“± ë§ì€ ë¶€ë¶„ì„ ì¶©ë¶„íˆ ê³ ë ¤í•˜ì§€ ì•Šìœ¼ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì•„ ì–´ë ¤ì›€ì„ ê²ªì—ˆìŠµë‹ˆë‹¤.
    * ë”°ë¼ì„œ ê°™ì€ ë…¼ë¬¸ì„ ì°¸ê³ í•´ [4.5 Modified Funnel Algorithm](https://skatgame.net/mburo/ps/thesis_demyen_2006.pdf#page=71)ì— ì œì•ˆëœ ë°©ë²•ì„ í•™ìŠµí•´ êµ¬í˜„í•´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/e7929cb5-f39c-4220-8b50-50c880fecc50)
      
    * ë…¼ë¬¸ì˜ ì˜ì‚¬ì½”ë“œë³´ë‹¤ëŠ” ê¸°ì¡´ì— êµ¬í˜„í–ˆë˜ Simple Stupid Funnel ì•Œê³ ë¦¬ì¦˜ì„ ê°œëŸ‰í•´ Modified Funnel Algorithmì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ë‘ edgeì˜ í‰ê·  ê¸°ìš¸ê¸°ë¥¼ êµ¬í•´ agentì˜ radiusë§Œí¼ ì´ê²©í•œ ìœ„ì¹˜ë¥¼ cornerë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
      * ~~ëª¨ë“ ~~ëŒ€ë¶€ë¶„ì˜ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ê³  í™•ì¸í•œ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
      * ì›ì˜ radiusëŠ” agent radiusí¬ê¸°ì™€ ë™ì¼í•˜ë©°, cornerì˜ ìˆ˜ì§ ë²¡í„°ëŠ” íšŒìƒ‰ìœ¼ë¡œ í‘œí˜„í–ˆìŠµë‹ˆë‹¤.
     
        ![image](https://github.com/user-attachments/assets/5c677e0d-0021-4e92-9f0b-55471c763619)

    * ì—¬ì „íˆ g-valueê³„ì‚°ì— ëŒ€í•œ ê³ ë¯¼ì€ í•„ìš”í•˜ì§€ë§Œ, ì´ë¡œì¨ ëª©í‘œí–ˆë˜ ê²½ë¡œì˜ í’ˆì§ˆì„ ë‹¬ì„±í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
    
âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ì‚¼ê°í˜•ì˜ ê°ë„ê°€ ë§¤ìš° í° ë‘”ê°ì„ ì´ë£¨ê³  ìˆì„ ê²½ìš° ì‹¤ì œë¡œëŠ” ìµœë‹¨ê±°ë¦¬ì„ì—ì„œ ê²½ë¡œë¡œ ì„ íƒë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. g-valueê³„ì‚° ë°©ë²•ì— ê´€í•´ì„œëŠ” ì§€ì†ì ìœ¼ë¡œ ê³ ë¯¼í•´ë³´ë ¤ í•©ë‹ˆë‹¤.
  * ê°„í˜¹ ê°™ì€ êµ¬ì—­ì—ì„œ ê°„í—ì ìœ¼ë¡œ cornerê°€ ì§€ì •ë˜ê±°ë‚˜ ì§€ì •ë˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì´ìƒì´ ìˆëŠ”ì§€ ë‹¤ì‹œ í™•ì¸í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.
  
âš½ ì´í›„ ê³„íš
  * ë…¼ë¬¸ì˜ 4.2ì ˆì— ì†Œê°œëœ ë°©ë²•ì„ í†µí•´ g-valueë¥¼ ê°œì„ í•  ìˆ˜ ìˆëŠ”ì§€, ë˜í•œ ê²½ë¡œ ê²€ìƒ‰ì˜ ì†ë„ë¥¼ ë” í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ”ì§€ ê³ ë¯¼í•´ë³´ë ¤í•©ë‹ˆë‹¤.
  
---
# ğŸ“… 2024.08.01
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ì‹¤ì œ í†µë¡œì˜ ë„ˆë¹„ì™€ agentì˜ í¬ê¸° ì°¨ì´ê°€ ê³¼ë„í•˜ê²Œ í¼ì—ë„ ê·¸ëƒ¥ í†µê³¼í•´ë²„ë¦´ ìˆ˜ ìˆë˜ ë¬¸ì œë¥¼ ìˆ˜ì • ì¤‘ì…ë‹ˆë‹¤.
  * ì•„ì§ êµ¬í˜„ ë° ì ìš©ì´ ì™„ë£Œë˜ì§€ ì•Šì•„ ê²°ê³¼ ìë£ŒëŠ” ì—†ì§€ë§Œ í†µë¡œì˜ ë„ˆë¹„ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ë˜ ì¤‘ [Efficient Triangulation-Based Pathfindin. (Douglas Jon Demyen)](https://skatgame.net/mburo/ps/thesis_demyen_2006.pdf#page=43)ì˜ 4.1ì ˆì— ì œì•ˆëœ ì•Œê³ ë¦¬ì¦˜ì„ ì•Œê²Œ ë¼, ì ìš© ì¤‘ì…ë‹ˆë‹¤.
    * í†µê³¼í•˜ê³ ì í•˜ëŠ” ë‘ edgeê°€ ì´ë£¨ëŠ” ê°ì´ ì§,ë‘”ê° ì´ìƒì¸ ê²½ìš°, ë‚˜ë¨¸ì§€ í•œ edgeê°€ ë§‰í˜€ìˆëŠ” ê²½ìš°, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ë“± ì—¬ëŸ¬ ê²½ìš°ì— í†µë¡œì˜ ë„ˆë¹„ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì œì•ˆí•©ë‹ˆë‹¤.
    * ì•„ë˜ëŠ” í˜„ì¬ êµ¬í˜„ ë° ì ìš© ì¤‘ì¸ ì˜ì‚¬ì½”ë“œì…ë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/c30d01ab-1e0f-4295-8192-7081b72b5302)
      ![image](https://github.com/user-attachments/assets/7f73f4ac-d5e1-4735-8795-b42aeae4822e)
      ![image](https://github.com/user-attachments/assets/8d1cd9db-53e5-4755-bff2-e29c459cfc6e)

    * í†µë¡œì˜ ë„ˆë¹„ê°€ ì˜ëª» ì¸¡ì •ë˜ëŠ” ê²½ìš°ê°€ ìˆì–´ íŒŒì•… ë° í•´ê²°ì¤‘ì…ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ ìœ„ ì‚¬í•­ê³¼ í•¨ê»˜ obstacleê³¼ì˜ ì¶©ë¶„í•œ ê±°ë¦¬ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ê²½ë¡œ ì„ íƒ ì „ë°˜ì˜ ê³¼ì •ì„ ê°œì„ í•  ê³„íšì…ë‹ˆë‹¤.

---
* ~~240801 ìƒê° ë©”ëª¨...~~
  * ~~IsOutì—ì„œ radiusë¥¼ ê³ ë ¤í•´ ì¶©ëŒ ì—¬ë¶€ í™•ì¸í•˜ëŠ” ê±´ ë¬´í•œë£¨í”„ ë°œìƒ... neighborê°€ nullptrì¼ ë•Œë§Œ ì ìš©í•˜ë©´ ì–‡ì€ neighborë¥¼ ë³´ìœ í•œ cellì—ì„œ ì¶©ëŒ ê²°ê³¼ê°€ ëª…í™•í•˜ì§€ ì•ŠìŒ...~~
    * ~~ê²½ë¡œë¡œ ì„ íƒëœ cellë‚´ì—ì„œë§Œ ì™¸ê³½ì¶©ëŒì„ ê²€ì¶œí•˜ë„ë¡ í•˜ë©´ ì¶©ë¶„íˆ ê°€ëŠ¥í•  ìˆ˜ë„??->ì•ˆë¨.~~
    * ~~í•´ë‹µì€ ë…¼ë¬¸ 4.1ê³¼ 4.2ì ˆì— ìˆëŠ”ê²ƒ ê°™ë‹¤. ê³ ë ¤í•´ë³´ì.~~
      
---
# ğŸ“… 2024.07.31
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * agentê°€ obstacleì˜ ê²½ê³„ì˜ì—­ê³¼ ì¶©ëŒí•˜ëŠ” ê²½ìš°, ì§„í–‰ì´ ë§‰íˆëŠ” í˜„ìƒì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * ìˆ˜ì • ì „ ë¬¸ì œ í˜„ìƒì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ê²½ê³„ì„ ì„ ë„˜ì–´ í•´ë‹¹ ë°©í–¥ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ì—†ë„ë¡ ì œí•œí–ˆìŠµë‹ˆë‹¤.
    
      ![FPS_61-DEBUG2024-07-3114-17-35-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/b5649b06-4661-446d-9751-0b31e628eb5f)

    * ì•„ë˜ëŠ” ìˆ˜ì • ì´í›„ì˜ ëª¨ìŠµì…ë‹ˆë‹¤. íƒˆì¶œ ë°©í–¥ìœ¼ë¡œ slide vectorë¥¼ ê³„ì‚°í•´ í˜„ì¬ ìœ„ì¹˜ì™€ cellì„ ë‹¤ì‹œ ì§€ì •í–ˆìŠµë‹ˆë‹¤.
   
      ![FPS_61-DEBUG2024-07-3114-15-54-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/5e74c9d1-7ff5-4881-ad4c-f12d40d33061)

    * ê°„ëµí•˜ê²Œ ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì™¸ì—ë„ ë‹¤ì‹œ ì…€ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ë“± ëª‡ ê°€ì§€ ì‘ì—…ì„ ì¶”ê°€í•´ í˜„ì¬ ìœ„ì¹˜í•œ ì…€ì„ ì¶”ì í•˜ëŠ”ë° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
 	```
  	...
  
 	// ì´ì „ ìœ„ì¹˜ + ì´ë™ ë°©í–¥ - (move.Dot(íƒˆì¶œedge.normal) * (íƒˆì¶œedge.normal)
	vPosition = vPrePos + vDir - (EPSILON + vDir.Dot(vPassedLine)) * vPassedLine;
	m_pCurrentCell = FindCellByPosition(vPosition);
  
  	...
 	```  
    * ì¶”ê°€ë¡œ, ê´€ë ¨ëœ ì½”ë“œ ì¼ë¶€ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

  * ì¢€ ë” ë³µì¡í•œ í™˜ê²½ì—ì„œì˜ path findingì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ ë§µì„ ë” ë³µì¡í•˜ê²Œ êµ¬ì„±í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì í•©í•œ 3D mesh ì˜¤í”ˆë¦¬ì†ŒìŠ¤ë¥¼ êµ¬í•˜ëŠ” ê²ƒì´ ì‰½ì§€ ì•Šì€ë°ë‹¤ê°€, í•„ìš”ì— ë”°ë¼ ë§µì„ ì–´ëŠ ì •ë„ ì»¤ìŠ¤í…€ ê°€ëŠ¥í•´ì•¼ ì´í›„ì—ë„ ì¢€ ë” ìœ ì—°í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
    * ë”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì€ ì´ë¯¸ì§€ë¥¼ ì œì‘í•´ navigation mesh ìƒì„±ì— ì‚¬ìš©í•´ ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

      ![testmaze](https://github.com/user-attachments/assets/25e38fb0-00f6-49b0-bfdd-3c400b71d8f6)

    * ì´ë¯¸ì§€ë¥¼ height mapìœ¼ë¡œ í™œìš©í•´ terrainì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

      ![image](https://github.com/user-attachments/assets/cd5b65c9-f7a6-4033-a924-daebd25923ad)

    * ì´ì „ì— ì œì‘í–ˆë˜ ê¸°ëŠ¥ì„ ê°œì„ í•´ ì´ë²ˆì—” ëª¨ë“  ì–¸ë• ì§€í˜•ì— ëŒ€í•´ í•œ ë²ˆì— outlineë“¤ì„ ìƒì„±, í™•ì¥ ë° ë‹¨ìˆœí™” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•œ ë’¤, triangulationì„ ì ìš©í•´ ìµœì¢… navigation meshë¥¼ ì œì‘í–ˆìŠµë‹ˆë‹¤.

      ![image](https://github.com/user-attachments/assets/11c7e984-ed3c-4721-be33-f8018ee1bb07)

    * path findingì€ ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.

      ![FPS_61-DEBUG2024-08-0110-34-37-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/4fa597d2-74e9-4d0c-8b93-dc04fd4f1f5f)

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * í•´ë‹¹ ì§€í˜•ì„ í†µí•´ ì œì‘ëœ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ë¥¼ ê´€ì°°í•´ë³´ë‹ˆ 4ì£¼ì°¨ íšŒì˜ì—ì„œ í”¼ë“œë°±ìœ¼ë¡œ ë§ì”€í•´ ì£¼ì…¨ë˜ ë¬¸ì œì ë“¤ì„ ë” ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
    * ì•„ë˜ì™€ ê°™ì´ ì¢ê³  ê¸´ í†µë¡œê°€ í˜•ì„±ë˜ëŠ” ì§€ì—­ì—ì„œëŠ” agentì˜ í¬ê¸°ê°€ ì‹¤ì œ í†µë¡œì˜ ë„ˆë¹„ë³´ë‹¤ í¬ë”ë¼ë„ ê¸¸ê²Œ í˜•ì„±ë˜ëŠ” portalì˜ ê¸¸ì´ ë•Œë¬¸ì— ê²½ë¡œë¡œ ì„ íƒì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      
    ![image](https://github.com/user-attachments/assets/aed8e6ed-6eff-410b-b13b-26db11abe5bf)

âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•´ agentê°€ ì‹¤ì œë¡œ ì´ë™ì´ ê°€ëŠ¥í•œ ì§€ì—­ë§Œì„ ê²½ë¡œë¡œ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ê°œì„ í•  ê³„íšì…ë‹ˆë‹¤.
  
---
# ğŸ“… 2024.07.30
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ì•„ë˜ì™€ ê°™ì´ ê²½ë¡œê°€ ì‹¬ê°í•˜ê²Œ ìš°íšŒë˜ëŠ” í˜„ìƒì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

    ![FPS_61-DEBUG2024-07-3017-58-21-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/36be4005-1744-4934-b63d-5274f0decc6e)

    * ì›ì¸ì€ ì–´ëŠì •ë„ ë¯¸ë¦¬ íŒŒì•…ì„ í–ˆìœ¼ë‚˜ ì¬ê·€ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” êµ¬ì¡°ê°€ ë§ì•„ ì •í™•í•œ ë¬¸ì œ ë°œìƒ ì§€ì ì„ ì°¾ëŠ”ë° ë§ì€ ì‹œê°„ì„ ì†Œìš”í–ˆìŠµë‹ˆë‹¤.
    * ì•„ë˜ì™€ ê°™ì´ g-valueê³„ì‚°ì— ì‚¬ìš©ëœ entry ë…¸ë“œë¥¼ ì˜ëª» ì§€ì •í•¨ìœ¼ë¡œì¨ g-valueì˜ ì˜¤ì°¨ê°€ ë§¤ìš° ì»¤ì§€ëŠ” ë¬¸ì œê°€ ì›ì¸ì´ì—ˆë˜ ê²ƒìœ¼ë¡œ íŒŒì•…ëìŠµë‹ˆë‹¤.

      ![image](https://github.com/user-attachments/assets/a65fcfd8-bb22-4ee0-9648-c161195655cd)

    * ìˆ˜ì •ëœ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ì§ì„ ê±°ë¦¬ì—ì„œ ê¸‰ê²©íˆ ìš°íšŒí•˜ëŠ” ë¬¸ì œë¥¼ ìˆ˜ì •í•˜ê³  ì–´ëŠì •ë„ ì¼ê´€ì„± ë†’ì€ ê²½ë¡œë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
      
      ![FPS_61-DEBUG2024-07-3018-27-09-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/1e67ae6e-0041-4198-851d-3558532bdb44)

    * ì§€ë‚˜ê°ˆ ìˆ˜ ì—†ëŠ” ì˜ì—­ê³¼ì˜ ê²½ê²Œ ë¶€ë¶„ì—ì„œ ì›í™œíˆ ì§„í–‰í•  ìˆ˜ ì—†ëŠ” í˜„ìƒì´ ìˆì–´ ìˆ˜ì • ì¤‘ì…ë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * agentì˜ sizeê°€ ì‘ì€ ê²½ìš° obstacleì˜ ê²½ê³„ì˜ì—­ê³¼ ì¶©ëŒí•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ëŠ”ë°, ì´ ë•Œ ì§„í–‰ì´ ë§‰íˆê±°ë‚˜ í†µê³¼í•´ë²„ë¦¬ëŠ” í˜„ìƒì´ ë°œìƒí•´ ìˆ˜ì • ì¤‘ì…ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ë§ì”€í•´ ì£¼ì‹  ì£¼ê°„ íšŒì˜ í”¼ë“œë°± ë‚´ìš©ì„ í† ëŒ€ë¡œ ë” ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ê²½ë¡œ íƒìƒ‰ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì„±í•  ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.29
  * 29ì¼ ì§„í–‰ ì‚¬í•­ì€ 4ì£¼ì°¨ ì£¼ê°„ íšŒì˜ë¡ì˜ í›„ë°˜ g-value í…ŒìŠ¤íŠ¸ ë¶€ë¶„ì— í•¨ê»˜ í¬í•¨ë¼ ìˆìŠµë‹ˆë‹¤.

    4ì£¼ì°¨ ì§„í–‰ ë‚´ìš© : https://equal-paw-e8f.notion.site/4-025bff362b2649668d2dccf85cfd482b?pvs=4
    
---
# ğŸ“… 2024.07.26
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * agentì˜ í¬ê¸°ë¥¼ ê³ ë ¤í•´ í†µê³¼í•  ìˆ˜ ìˆëŠ” êµ¬ì—­ë§Œì„ ê²½ë¡œë¡œ ì„ íƒí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * í†µê³¼í•˜ê²Œ ë  edge(portal)ê°€ agentì˜ ì§€ë¦„ë³´ë‹¤ ì‘ë‹¤ë©´ ìš°ì„ ìˆœìœ„ íì— ì €ì¥í•˜ì§€ ì•Šë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

    ![FPS_61-DEBUG2024-07-2910-17-27-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/222e9b23-906b-46fe-8d99-26d06bf38f1a)
    
  * ë„ì°©ì§€ì ì´ obstacle ì˜ì—­ ë‚´ì— ìˆë‹¤ë©´, ê·¼ì²˜ì˜ ìœ íš¨í•œ ì˜ì—­ì„ ëŒ€ì‹  ëª©ì ì§€ë¡œ ì§€ì •í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * ì§€ì •í•œ ë„ì°© ì§€ì ì´ obstacle ì˜ì—­ì˜ ë‚´ì— ìˆë‹¤ë©´ ì¸ì ‘í•œ ìœ„ì¹˜ì˜ cellì„ ë„ì°© ì§€ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

    ![FPS_61-DEBUG2024-07-2910-19-29-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/98acc55a-4ce9-430e-bdbd-f2cdfe74ec93)
  
  * ë§µì˜ ì „ì²´ êµ¬ì—­ì„ gridë¡œ ë¶„í•  í•´, grid ë‚´ì—ì„œ ë¹ ë¥´ê²Œ cellì„ íƒìƒ‰í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * ê°ê°ì˜ cellë“¤ì€ ìœ„ì¹˜ë¥¼ keyê°’ìœ¼ë¡œ í•˜ëŠ” AABB ì˜ì—­ì— í¬í•¨ë˜ë„ë¡ multi-map êµ¬ì¡°ë¡œ ì €ì¥í–ˆìŠµë‹ˆë‹¤.
    * ì˜ìƒì—ì„œ ë³´ì´ëŠ” ê²©ìëŠ” gridì˜ AABB í¬ê¸°ì™€ ë™ì¼í•©ë‹ˆë‹¤.

  * ë” ë‚˜ì€ ê²½ë¡œë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ìœ„í•´ ì¶”ê°€ í•™ìŠµì¤‘ì…ë‹ˆë‹¤. (Efficient Triangulation-Based Pathfindin. (Douglas Jon Demyen))

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ì´ì „ì— ê¸°ë¡í–ˆë˜ ë¬¸ì œë“¤ì„ ì•„ì§ í•´ê²°í•˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤.(ë„ì°©ì§€ì ì—ì„œì˜ ê²½ë¡œ ë¬¸ì œ ë“±)

âš½ ì´í›„ ê³„íš
  * ìœ„ ë…¼ë¬¸ì—ì„œ ì œì•ˆí•œ ë°©ë²•ì„ ì°¸ê³ í•´ ê²½ë¡œì˜ gê°’ì„ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì„ ê°œì„ í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.
    * ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ë°©ë²•ì„ í†µí•´ ê³„ì‚°í•œ g-costë¥¼ ë¹„êµí•¨ìœ¼ë¡œì¨ ê²½ë¡œ ê°œì„  ì—¬ë¶€ë¥¼ í™•ì¸í•´ë³´ë ¤í•©ë‹ˆë‹¤.(5.5 Triangulation A* (TA*)ì˜ ì¼ë¶€ì…ë‹ˆë‹¤)        
      ![image](https://github.com/user-attachments/assets/b5edb17b-046e-4874-bb9e-3c95b1c8bd70)

---
# ğŸ“… 2024.07.25
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * Simple Stupid Funnel ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•´ ê²½ë¡œë¥¼ ë‹¨ìˆœí™”í–ˆìŠµë‹ˆë‹¤. (ë„ì°©ì§€ì  ë¶€ê·¼ì—ì„œ ì•½ê°„ì˜ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.)
    * ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì³ ê²½ë¡œë¥¼ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      * waypointì™€ portal(í†µê³¼í•  edge)ì˜ ì¢Œìš° ì •ì ì„ ì—°ê²°í•œ ì„ ë¶„ì„ ì ì°¨ ì¢í˜€ë‚˜ê°€ë©° cornerë¥¼ ì°¾ê³ , ë„ì°©ì§€ì ê¹Œì§€ ë°˜ë³µì ìœ¼ë¡œ íƒìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤.
      * ê³¼ì •ì„ ê°„ëµíˆ ë¬˜ì‚¬í•œ ìë£Œì…ë‹ˆë‹¤.
        
        ![image](https://github.com/user-attachments/assets/f44801d9-f42e-48ee-9c00-0f423837af28)
        
	```
	void CAgentController::SSF()
	{
		Vec3 vPortalApex = m_pTransform->GetPosition();		// ì´ˆê¸° ìƒíƒœ
		Vec3 vPortalLeft = m_pTransform->GetPosition();
		Vec3 vPortalRight = m_pTransform->GetPosition();

		_int iApexIndex = 0;
		_int iLeftIndex = 0;
		_int iRightIndex = 0;

		m_dqWayPoints.push_back(vPortalApex);

		for (_int i = 1; i < m_dqPortals.size(); ++i)
		{
			const Vec3& vLeft = m_dqPortals[i].first;
			const Vec3& vRight = m_dqPortals[i].second;

			if (TriArea2x(vPortalApex, vPortalRight, vRight) <= 0.0f)	// ì‹œì‘ì , í˜„ì¬ portalì˜ right, ë‹¤ìŒ portalì˜ right ìœ„ì¹˜ê°€ êµ¬ì„±í•˜ëŠ” ë„“ì´ê°€ 0 ì´í•˜,
 			{								// ì¦‰ ë‹¤ìŒ portalì˜ rightë¥¼ ì—°ê²°í•œ ì„ ì´ ì™¸ë¶€ë¥¼ ì§€ë‚˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸ -> ê·¸ë¦¼ E
				if (vPortalApex == vPortalRight || TriArea2x(vPortalApex, vPortalLeft, vRight) > 0.0f)
				{
					vPortalRight = vRight;			// funnel ë‹¹ê¸°ê¸° -> ê·¸ë¦¼ B, C, D
					iRightIndex = i;
				}
				else
				{
					m_dqWayPoints.push_back(vPortalLeft);	// Rightê°€ Leftë¥¼ ë„˜ì—ˆë‹¤ë©´ Leftë¥¼ waypointì— ì¶”ê°€ -> ê·¸ë¦¼ F
								
					vPortalApex = vPortalLeft;		// Lì„ ìƒˆë¡œìš´ ì‹œì‘ì ìœ¼ë¡œ -> ê·¸ë¦¼ G
					iApexIndex = iLeftIndex;

					vPortalRight = vPortalApex;		// í•´ë‹¹ ì§€ì ìœ¼ë¡œ ì´ˆê¸°í™”
					iRightIndex = iApexIndex;

					i = iApexIndex;				// ì¬ì‹œì‘í•  ì¸ë±ìŠ¤
					continue;
				}
			}

			if (TriArea2x(vPortalApex, vPortalLeft, vLeft) >= 0.0f)
			{
				if (vPortalApex == vPortalLeft || TriArea2x(vPortalApex, vPortalRight, vLeft) < 0.0f)
				{
					vPortalLeft = vLeft;
					iLeftIndex = i;
				}
				else
				{
					m_dqWayPoints.push_back(vPortalRight);

					vPortalApex = vPortalRight;
					iApexIndex = iRightIndex;

					vPortalLeft = vPortalApex;
					iLeftIndex = iApexIndex;

					i = iApexIndex;
					continue;
				}
			}
		}	

		m_dqWayPoints.push_back(m_vDestPos);
	}
	```
        
      * êµ¬í˜„ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

	![FPS_61-DEBUG2024-07-2610-39-55-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/c32573eb-4923-4c92-a0bb-9563f8aaf942)
        
  * AStarì— ë¶ˆí•„ìš”í•œ ìë£Œêµ¬ì¡°ê°€ ì‚¬ìš©ë¼ ê°œì„ ì¤‘ì…ë‹ˆë‹¤.


âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ëª©ì ì§€ cellì—ì„œ cornerë¥¼ ë°©ë¬¸í•œ í›„ destination positionìœ¼ë¡œ ë„ì°©í•©ë‹ˆë‹¤. ì „ì²´ì ì¸ ê²½ë¡œì— í° ë¬¸ì œëŠ” ì—†ì§€ë§Œ ë„ì°©ì§€ì  ë¶€ê·¼ì—ì„œì˜ ê²½ë¡œëŠ” ê°œì„ í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
  * ì•„ì§ obstacleê³¼ ë¶€ë”ªí˜”ì„ ë•ŒëŠ” ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ìœ„ì˜ ì˜ìƒì€ ì„ì‹œë¡œ obstacleì„ ë¬´ì‹œí•˜ë„ë¡ ì„¤ì •í•´, ì¼ë¶€ í†µê³¼í•œ cellì˜ ìƒ‰ì´ ë°”ë€Œì§€ ì•ŠìŠµë‹ˆë‹¤.)

âš½ ì´í›„ ê³„íš
  * ì§€ê¸ˆì€ agentì˜ í¬ê¸°ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì•„ ì¢ì€ êµ¬ê°„ë„ ììœ ë¡­ê²Œ í†µê³¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì„ ë°˜ì˜í•´ ê²½ë¡œë¥¼ ê²°ì •í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  
---
# ğŸ“… 2024.07.24
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * obstacle ë°ì´í„° ì €ì¥ì‹œ, ì˜¤ë¸Œì íŠ¸ ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•Šì•„ meshë¥¼ loadí•˜ì§€ ì•Šë˜ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
  * agentê°€ ì‚¼ê°í˜• cell ì˜ì—­ì„ ë²—ì–´ë‚˜ì§€ ì•Šê³  ì´ë™í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
  * ê¸°ë³¸ì ì¸ í˜•íƒœì˜ A* ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * AgentëŠ” ê²½ë¡œë¡œ íƒìƒ‰ëœ ì‚¼ê°í˜•ì˜ ë¬´ê²Œì¤‘ì‹¬ ì¢Œí‘œë¥¼ waypointë¡œ ì„¤ì •í•´ ì´ë™í•©ë‹ˆë‹¤.
    * ê²½ë¡œê°€ ì‹¬ê°í•œ ì§€ê·¸ì¬ê·¸ í˜•íƒœë¡œ ë‚˜íƒ€ë‚˜ê¸° ë•Œë¬¸ì— ë§¤ë„ëŸ¬ìš´ í˜•íƒœë¡œ ë‹¤ë“¬ê¸° ìœ„í•´ ê´€ë ¨ ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œë¥¼ í•™ìŠµì¤‘ì…ë‹ˆë‹¤.
    * í˜„ì¬ ìƒíƒœëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ê²½ë¡œë¡œ íƒìƒ‰ëœ cellì€ í•˜ëŠ˜ìƒ‰, í†µê³¼í•˜ê²Œ ë˜ëŠ” portal(edge)ì€ íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤. portalì€ ì´í›„ ê²½ë¡œ ê°œì„ ì— ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•¨ê»˜ ì €ì¥í–ˆìŠµë‹ˆë‹¤.
      * ê±°ë¦¬ ì²™ë„ ê³„ì‚°ì€ ìš°ì„  ìœ í´ë¦¬ë“œ ê±°ë¦¬(sqrt(pow(x, 2) + pow(z, 2)))ë¡œ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ë²•ì„ í•¨ê»˜ ì ìš©í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.
      * obstacle : 150+ / cell : 1500+
        
        ![FPS_61-DEBUG2024-07-2510-23-41-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/851d44b2-4b3d-429a-988c-b7659c21ba9b)

        ```
		_bool CAgentController::AStar()
		{
			priority_queue<PQNode, vector<PQNode>, greater<PQNode>> pqOpen;
			map<CellData*, pair<CellData*, LINES>> mapPath;
			map<CellData*, _float> mapCost;
			set<CellData*> setClosed;
			m_vecPath.clear();

			{	// start node
				Vec3 vStartPos = m_pTransform->GetPosition();

				_float g = 0.0f;
				Vec3 vDistance = m_vDestPos - vStartPos;
				_float h = vDistance.Length();

				pqOpen.push(PQNode{ g + h, g, m_pCurrentCell });
				mapCost[m_pCurrentCell] = 0.0f;
				mapPath[m_pCurrentCell] = pair(nullptr, LINE_END);
			}

			while (false == pqOpen.empty())
			{
				PQNode tNode = pqOpen.top();

				if (tNode.pCell == m_pDestCell)
				{
					pair<CellData*, LINES> pairCell(m_pDestCell, LINE_END);
					while (nullptr != pairCell.first)
					{
						m_vecPath.push_back(pairCell);
						pairCell = mapPath[pairCell.first];
					}

					return true;
				}

				pqOpen.pop();
				setClosed.emplace(tNode.pCell);

				for (uint8 i = LINE_AB; i < LINE_END; ++i)
				{
					CellData* pNeighbor = tNode.pCell->pNeighbors[i];
					if (nullptr != pNeighbor && 0 == setClosed.count(pNeighbor))
					{
						mapCost[pNeighbor] = mapCost[tNode.pCell] + CellData::CostBetween(tNode.pCell, pNeighbor);
						mapPath[pNeighbor] = pair(tNode.pCell, (LINES)i);

						_float g = mapCost[pNeighbor];
						pqOpen.push(PQNode{ g + CellData::HeuristicCost(pNeighbor, m_vDestPos), g, pNeighbor });
					}
				}
			}

			return false;
		}
      	```
  
âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ë‹¹ì¥ì€ waypointë¥¼ dellì˜ ë¬´ê²Œì¤‘ì‹¬ìœ¼ë¡œ ì§€ì •í•œ ìƒíƒœì´ê¸° ë•Œë¬¸ì— ê²½ë¡œê°€ ë§¤ìš° ë¶ˆì•ˆì •í•©ë‹ˆë‹¤.
  * ë„ì°© ì§€ì ì´ í¬í•¨ëœ cellì„ ëª¨ë“  cellì— ëŒ€í•œ linear searchë¡œ íƒìƒ‰í•˜ê³  ìˆì–´ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.
  * navmeshì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì´ë™ ëª…ë ¹ ì‹œ ìš°ì„  ë¬´ì‹œí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ê°€ì¥ ê°€ê¹Œìš´ ì˜ì—­ì„ íƒìƒ‰í•˜ê±°ë‚˜, navmesh ì™¸ë¶€ì™€ì˜ ê²½ê³„ì„ ì—ì„œì˜ ìŠ¬ë¼ì´ë”©ê³¼ ê°™ì€ ì„¸ë¶€ì ì¸ ë¶€ë¶„ì€ ì•„ì§ êµ¬í˜„í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
  
âš½ ì´í›„ ê³„íš
  * Simple Stupid Funnel ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ì´ë¥¼ ê°œì„ í•˜ê³ ì í•©ë‹ˆë‹¤.
  * Efficient Triangulation-Based Pathfindin. (Douglas Jon Demyen) ë“±ì˜ ìë£Œë¥¼ ì°¸ê³ í•˜ê³  ìˆìŠµë‹ˆë‹¤.
  * ë” ì¢‹ì€ ê²½ë¡œë¥¼ ë°œê²¬í•  ìˆ˜ ìˆëŠ” íœ´ë¦¬ìŠ¤í‹±ì„ ì‹œë„í•´ë³´ê³ ì í•©ë‹ˆë‹¤.
  * ì•„ì§ì€ agentì˜ í¬ê¸°ëŠ” ê³ ë ¤í•˜ì§€ ì•Šì€ ì±„ ê²½ë¡œë¥¼ íƒìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê²½ë¡œ ë‹¨ìˆœí™” ì´í›„ì— ì‹œë„í•´ë³´ë ¤í•©ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.23
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ê²½ë¡œíƒìƒ‰ êµ¬í˜„ì„ ìœ„í•´ agentë¥¼ ë°°ì¹˜í•˜ê³  navigation mesh ìœ„ì—ì„œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ì¤‘ì…ë‹ˆë‹¤.
  * ê°„ë‹¨í•œ sphereí˜•íƒœì˜ agentë¥¼ ë°°ì¹˜í–ˆìŠµë‹ˆë‹¤. agentì˜ í˜„ì¬ ìœ„ì¹˜ë¶€í„° ë§ˆìš°ìŠ¤ë¡œ ì§€ì •í•œ ë„ì°© ì§€ì ì„ í–¥í•´ ì´ë™í•˜ë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  * ì‚¼ê°í˜• ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ì—ì„œ ê²½ë¡œ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•œ ì˜ˆë¥¼ ë‹¤ì‹œ ì°¾ì•„ë³´ë©° í•™ìŠµì¤‘ì…ë‹ˆë‹¤.
  * íˆ´ì—ì„œ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” legacy ì½”ë“œë¥¼ í•œ ì°¨ë¡€ ë” ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.
  * ê²½ë¡œ íƒìƒ‰ êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ì€ ìë£Œë¥¼ ì°¸ê³ í•´ ì ‘ê·¼í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.
    * https://jceipek.com/Olin-Coding-Tutorials/pathing.html#funnel-algorithm

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ~~ì…€ì„ ë²—ì–´ë‚œ ê²½ìš° ì •ìƒì ìœ¼ë¡œ í˜„ì¬ ì…€ì— ëŒ€í•œ ì¶”ì ì´ ì§„í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆì–´ ìˆ˜ì •ì¤‘ì…ë‹ˆë‹¤.~~ -> ì´ˆê¸° ë°°ì¹˜ ì‹œ, ì…€ì„ ë²—ì–´ë‚œ ê³³ì— ë°°ì¹˜í•œ ê²½ìš° í˜„ì¬ ìœ„ì¹˜ë¥¼ íŒŒì•…í•˜ì§€ ëª»í•´ ë°œìƒí•œ ë¬¸ì œë¡œ í™•ì¸ëìŠµë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ~~ìš°ì„  ì •ìƒì ìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ ìœ„ì—ì„œ agentê°€ ì›€ì§ì¼ ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•  ê³„íšì…ë‹ˆë‹¤.~~
  * agentì™€ navigation meshì™€ì˜ ìƒí˜¸ì‘ìš©ì´ í™•ì¸ ë˜ë©´, A* ë¥¼ ì´ìš©í•´ ê¸°ë³¸ì ì¸ í˜•íƒœì˜ ê²½ë¡œíƒìƒ‰ì„ êµ¬í˜„í•  ì˜ˆì •ì…ë‹ˆë‹¤.
  * ê²½ë¡œ ìµœì í™”ì™€ ì„±ëŠ¥ ê°œì„ ì€ ìš°ì„  A* ì ìš© í›„ì— ë” ê³ ë¯¼í•´ë³´ë¡ í•  ê³„íšì…ë‹ˆë‹¤.

---
3ì£¼ì°¨ ì§„í–‰ ë‚´ìš© : https://equal-paw-e8f.notion.site/3-ce15dfe28bc74c5fac609bf0340a0c8f?pvs=4

---
# ğŸ“… 2024.07.22
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * obstacleì´ ë  ìˆ˜ ìˆëŠ” ì¼ë¶€ 3D meshì˜ obstacle dataë¥¼ xmlë¡œ ì €ì¥í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
    * í¬ê¸°ê°€ ë„ˆë¬´ ì‘ì€ obstacleì˜ ê²½ìš° ê·¸ëƒ¥ outlineì„ ìë™ ìƒì„±í•˜ì§€ ì•Šê³  ì§ì ‘ ê°’ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.(ì •ë°€ë„ë¥¼ ë†’ì—¬ ìƒì„±í•˜ëŠ” ê²ƒì€ ì‰½ì§€ë§Œ í¬ê¸°ê°€ ë„ˆë¬´ ì‘ë‹¤ë©´ ë¹„ìŠ·í•œ í¬ê¸°ì˜ aabbë¡œ ì¶©ë¶„í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.)
    * obstacleì— ëŒ€í•œ data fileì„ ê°€ì§€ê³  ìˆëŠ” meshì¸ ê²½ìš°, ìƒì„±ê³¼ ë™ì‹œì— ìë™ìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ë¥¼ Updateí•©ë‹ˆë‹¤.
    * obstacleì˜ tranformì„ ì¡°ì‘í•  ì‹œ, obstacle ì˜ì—­ë„ í•¨ê»˜ ì¬ì¡°ì •ë©ë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * obstacleì˜ í¬ê¸°ê°€ ë„ˆë¬´ ì‘ì€ ê²½ìš°, outlineì´ ì •êµí•˜ê²Œ ìƒì„±ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìˆ˜ì¹˜ë§Œ ì¡°ì ˆí•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œì´ì§€ë§Œ, ê·¸ëƒ¥ ê°„ë‹¨í•œ í˜•íƒœì˜ aabbë¡œ ëŒ€ì²´í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
  * transformì„ ì¡°ì‘í•  obstacleì„ ë³€ê²½í• ì‹œ í”„ë¡œê·¸ë¨ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤. ì‚¬ì´í´ ë¬¸ì œì´ë¯€ë¡œ ì½”ë“œë¥¼ ì •ë¦¬í•˜ë©° ìˆ˜ì •í•  ê³„íšì…ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * obstacleì´ ë‹¤ìˆ˜ ë°°ì¹˜ëœ í™˜ê²½ì—ì„œ ê²½ë¡œ íƒìƒ‰ì„ êµ¬í˜„í•  ì˜ˆì •ì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.19
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * 3D Obstacle ë°°ì¹˜í•  ë•Œ, ì§€í˜•ì— ì™¸ê³½ì„ ì´ ê·¸ë ¤ì§€ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ë“¤ì„ í†µí•´ ì •ì ì˜ ê°¯ìˆ˜ë¥¼ ì¤„ì—¬ ìƒì„±ë˜ëŠ” ì‚¼ê°í˜•ì˜ ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì‹¤í–‰ ì „ ë¯¸ë¦¬ ìˆ˜í–‰ë˜ëŠ” ì‘ì—…ì´ë¯€ë¡œ ì†ë„ë¥¼ í¬ê²Œ ê³ ë ¤í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.
    * ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¡œ Meshì˜ í•˜ë‹¨ë¶€ì— Ray Castingí•´ ì¶©ëŒ ì§€ì ì„ ê²€ì¶œí•´ ì™¸ê³½ì„ ì˜ ì •ì ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
    * ê¸¸ì´ 1ë‹¨ìœ„ë¡œ Rayì™€ êµì°¨í•˜ëŠ” ì§€ì ì„ ëª¨ë‘ êµ¬í•œ í›„, DFSë¥¼ ì´ìš©í•´ ì™¸ê³½ì„ ë§Œì„ íƒìƒ‰í–ˆìŠµë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/555caf8a-e3f4-4413-96d4-8d57e84d33a2)
      
    * ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ì•„ë˜ ì‚¬ì§„ì—ì„œ outlineì˜ ì´ ì ì ì˜ ê°¯ìˆ˜ëŠ” 77ê°œì…ë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/ccd18e59-8bcb-45ca-a7e9-864516c0ee13)
      
  * ì™¸ê³½ì„  ì˜ì—­ì´ Meshì— ë„ˆë¬´ ê°€ê¹Œì´ ìƒì„±ë˜ì§€ ì•Šê³  ì•½ê°„ í™•ì¥í•´ ë–¨ì–´ì ¸ ìƒì„± ë  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * ê° ì •ì ì˜ normalì„ ê³„ì‚°í•´ ì™¸ë¶€ ë°©í–¥ìœ¼ë¡œ ì •ì ì„ í™•ì¥ ì´ë™í–ˆìŠµë‹ˆë‹¤. ì‹œê³„ë°©í–¥ í™•ì¸ì„ í†µí•´ normalì´ ì˜ì—­ì˜ ë‚´ë¶€ë¥¼ í–¥í•œë‹¤ë©´ ë°©í–¥ì„ ë°˜ëŒ€ë¡œ ë’¤ì§‘ì—ˆìŠµë‹ˆë‹¤.

      ```
		vector<Vec3> CNavMeshView::ExpandOutline(const vector<iVec3>& vecOutline, _float fDistance)
		{
			vector<Vec3> vecExpandedOutline;
			_int iSize = vecOutline.size();

			_bool isClockwise = IsClockwise(vecOutline);

			for (_int i = 0; i < iSize; ++i)
     		{
				const iVec3& vPrev = vecOutline[(i - 1 + iSize) % iSize];
				const iVec3& vCurrent = vecOutline[i];
				const iVec3& vNext = vecOutline[(i + 1) % iSize];
				Vec3 vNormal = CalculateNormal(vPrev, vCurrent, vNext);

				if (false == isClockwise)
				{
					vNormal = { -vNormal.x, 0.0f, -vNormal.z };
				}

				Vec3 vExpandedPoint = { (_float)vCurrent.x + vNormal.x * fDistance, (_float)(vCurrent.y), (_float)vCurrent.z + vNormal.z * fDistance };
				vecExpandedOutline.push_back(vExpandedPoint);
      	}

      	return vecExpandedOutline;
      }
      ```
      
      ![image](https://github.com/user-attachments/assets/34341de1-976f-44db-b2fd-be776b3e4e33)
    
  * ì™¸ê³½ì„  ì˜ì—­ì„ í™•ì¥í–ˆì„ ë•Œ, êµì°¨ì§€ì ì´ ìƒê¸°ì§€ ì•Šë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * edgeì˜ êµì°¨íŒì •ì„ í†µí•´ ë‘ edgeê°€ êµì°¨í•œë‹¤ë©´ ì‚¬ì´ì˜ ì •ì ë“¤ì„ ëª¨ë‘ ì œê±°í•˜ê³  êµì°¨ì ìœ¼ë¡œ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤. ì •ì ì˜ ê°¯ìˆ˜ëŠ” 71ê°œì…ë‹ˆë‹¤.
      ```
      vector<Vec3> CNavMeshView::ProcessIntersections(vector<Vec3>& vecExpandedOutline)
	  {
			vector<Vec3> vecResult;
			_int iSize = vecExpandedOutline.size();

			for (_int i = 0; i < iSize; ++i)
			{
				const Vec3& vP1 = vecExpandedOutline[i];
				const Vec3& vQ1 = vecExpandedOutline[(i + 1) % iSize];

				_bool isIntersected = false;
				for (_int j = i + 2; j < iSize - 1; ++j)
				{
					const Vec3& vP2 = vecExpandedOutline[j % iSize];
					const Vec3& vQ2 = vecExpandedOutline[(j + 1) % iSize];
					Vec3 vIntersection;

					if (true == IntersectSegments(vP1, vQ1, vP2, vQ2, vIntersection))
					{
						vecResult.push_back(vIntersection);
						i = j; // êµì°¨ êµ¬ê°„ skip
						isIntersected = true;
						break;
					}
				}

				if (false == isIntersected)
				{
					vecResult.push_back(vP1);
				}
			}

			return vecResult;
	  }
      ```
      ![image](https://github.com/user-attachments/assets/747fea07-aa21-489e-9d48-cf7bbb7e5c3b)

    * ì•„ë˜ëŠ” ì¼ë¶€ êµì°¨ì§€ì ì´ ì œê±°ëœ ëª¨ìŠµì…ë‹ˆë‹¤.
      
      ![image](https://github.com/user-attachments/assets/b0c61277-24ac-48e5-a789-dc1c345f3777)
    
  * ì™¸ê³½ì„ ì„ í˜•ì„±í•˜ëŠ” ì •ì ì˜ ê°¯ìˆ˜ë¥¼ ì¤„ì´ê³  í˜•íƒœë¥¼ ë‹¨ìˆœí™” í•˜ê³ ì Douglas Peuker ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•´ í˜•íƒœë¥¼ ë‹¨ìˆœí™” í–ˆìŠµë‹ˆë‹¤. ìµœì¢… ì •ì ì˜ ê°¯ìˆ˜ëŠ” 15ê°œì…ë‹ˆë‹¤.
  
  	```
	void CNavMeshView::RamerDouglasPeucker(const vector<Vec3>& vecPointList, _float fEpsilon, OUT vector<Vec3>& vecOut)
	{
		// ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ì„ ë¶„ íƒìƒ‰
		_float fDmax = 0.0f;
		size_t iIndex = 0;
		size_t iEnd = vecPointList.size() - 1;
	
		for (size_t i = 1; i < iEnd; i++)
		{
			_float fD = PerpendicularDistance(vecPointList[i], vecPointList[0], vecPointList[iEnd]);

			if (fD > fDmax)
			{
				iIndex = i;
				fDmax = fD;
			}
		}

		// fEpsilonë³´ë‹¤ fDmaxê°€ í¬ë‹¤ë©´
		if (fDmax > fEpsilon)
		{
			// ì¬ê·€ ìˆ˜í–‰
			vector<Vec3> vecRecResults1;
			vector<Vec3> vecRecResults2;
			vector<Vec3> vecFirstLine(vecPointList.begin(), vecPointList.begin() + iIndex + 1);
			vector<Vec3> vecLastLine(vecPointList.begin() + iIndex, vecPointList.end());
			RamerDouglasPeucker(vecFirstLine, fEpsilon, vecRecResults1);
			RamerDouglasPeucker(vecLastLine, fEpsilon, vecRecResults2);

			// ìµœì¢… ë¦¬ìŠ¤íŠ¸
			vecOut.assign(vecRecResults1.begin(), vecRecResults1.end() - 1);
			vecOut.insert(vecOut.end(), vecRecResults2.begin(), vecRecResults2.end());
		}
		else
		{
			vecOut.clear();
			vecOut.push_back(vecPointList[0]);
			vecOut.push_back(vecPointList[iEnd]);
		}
	}
	```

    ![image](https://github.com/user-attachments/assets/17933064-55e1-4b32-988b-75a9e7f44bdb)

  * ìµœì¢…ì ìœ¼ë¡œ ì‚¼ê°í˜•ì˜ ê°¯ìˆ˜ë¥¼ 77ê°œì—ì„œ 15ê°œë¡œ ì¤„ì—¬ ìƒì„±ë˜ëŠ” ì‚¼ê°í˜•ì˜ ìˆ˜ì™€ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ìµœì¢… outlineì˜ ì •ì  ë°ì´í„°ë¥¼ ë°ì´í„° íŒŒì¼ì— í¬í•¨í•  ê³„íšì…ë‹ˆë‹¤.
  * ì‚¼ê°í˜• ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ì—ì„œ ê²½ë¡œ íƒìƒ‰ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•  ê³„íšì…ë‹ˆë‹¤.
  * í˜„ì¬ obstacleê³¼ êµì°¨í•˜ëŠ” ì‚¼ê°í˜•ì„ íƒìƒ‰í•˜ê¸° ìœ„í•´ ì „ì²´ ì‚¼ê°í˜•ì„ ëª¨ë‘ ìˆœíšŒì¤‘ì…ë‹ˆë‹¤. ìµœì†Œí•œì˜ ì˜ì—­ì—ì„œ íƒìƒ‰ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ë°©ì•ˆì„ ê³ ë¯¼ì¤‘ì…ë‹ˆë‹¤.

---
* ~~240719 ìƒê° ë©”ëª¨...~~
  * ~~3D Obstacle ë°°ì¹˜ì‹œ, plane terrainì— ì™¸ê³½ Lineì„ ê·¸ë¦´ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ëŠ” ì¤‘ì…ë‹ˆë‹¤.~~
  * ~~ì§€í˜•ì„ gridë¡œ ë¶„í• í•˜ê³  3D Meshì˜ ì§€ë©´ ë¶€ë¶„ì— xzí‰ë©´ì—ì„œ raycastingì„ í•´ì„œ meshì™€ êµì°¨í•˜ëŠ” ì§€ì ì„ êµ¬í•œ í›„, ì´ë¥¼ DFSë¡œ ìµœì¥ê±°ë¦¬ íƒìƒ‰ì„ í†µí•´ outlineì„ ê³„ì‚°í•  ê³„íšì…ë‹ˆë‹¤.~~
  * ~~ê³„ì‚°ëœ outlineì„ normal ë°©í–¥ìœ¼ë¡œ í™•ì¥í•˜ê³  Douglas-Peucker ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•´ ì™¸ê³½ì„ ì„ ê·¼ì‚¬í™”í•´ ì •ì ì˜ ê°¯ìˆ˜ë¥¼ ì¤„ì¼ ê³„íšì…ë‹ˆë‹¤.~~
  * ~~ì™¸ê³½ì„  ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•œí›„ obstacle ë°ì´í„°ì™€ í•¨ê»˜ loadí•  ê³„íšì…ë‹ˆë‹¤.~~

---
# ğŸ“… 2024.07.18
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * Dynamic Obstacle ì˜ ìƒì„± ë° ì‚­ì œ ì‹œ Cellê³¼ì˜ Intersectionì„ GPUì—ì„œ ê²€ì¶œí•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
  * AABB to Triangle Intersectionì˜ HLSLì½”ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
    ```
    bool IntersectTriangleAABB(float3 vT0, float3 vT1, float3 vT2, float3 vCenter, float3 vExtents)
	{
 		// ...
    
    	// Axis vA00
    	float3 vA00 = float3(0.0f, -vEdge0.z, vEdge0.y);
    	float fP0 = dot(vV0, vA00);
    	float fP1 = dot(vV1, vA00);
    	float fP2 = dot(vV2, vA00);
    	float fR = vExtents.y * abs(vEdge0.z) + vExtents.z * abs(vEdge0.y);
    	if (max(-Max(fP0, fP1, fP2), Min(fP0, fP1, fP2)) > fR)
     	  return false;

    	// Axis vA01
    	float3 vA01 = float3(0, -vEdge1.z, vEdge1.y);
    	fP0 = dot(vV0, vA01);
    	fP1 = dot(vV1, vA01);
    	fP2 = dot(vV2, vA01);
    	fR = vExtents.y * abs(vEdge1.z) + vExtents.z * abs(vEdge1.y);
    	if (max(-Max(fP0, fP1, fP2), Min(fP0, fP1, fP2)) > fR)
      	  return false;
    
		// Axis vA02
    	// Axis vA10
    	// Axis vA11
    	// Axis vA12
    
    	// ...
    }
    ```
  * ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

    ![FPS_2382-RELEASE2024-07-1910-35-41-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/3d1a9a39-c78f-41a2-b8be-d2d89b513a90)

    * ìƒìˆ˜ ë²„í¼ì˜ 16byte alignmentì— ì‹¤ìˆ˜ê°€ ìˆì–´ ì˜ˆìƒë³´ë‹¤ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í–ˆìŠµë‹ˆë‹¤.
      
âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ë¬¸ì œë¼ê¸° ë³´ë‹¨, cellì˜ ê°¯ìˆ˜ê°€ ì ì€ í˜„ì¬ ìƒí™©ì—ì„œëŠ” í•˜ë“œì›¨ì–´ í™˜ê²½ì— instersectionì„ CPUì—ì„œ êµ¬í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¸ê²ƒ ê°™ìŠµë‹ˆë‹¤.
    * i9-12900k / RTX3060 OC ì—ì„œëŠ” CPUì—ì„œ, i5-10200H / RTX3060(Laptop) ì—ì„œëŠ” GPUì—ì„œ ë” ë†’ì€ ì„±ëŠ¥ì„ ë³´ì˜€ìŠµë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * 3D Obstacleì„ ë°°ì¹˜í•´ Mapì„ êµ¬ì„±í•  ê³„íšì…ë‹ˆë‹¤.
  * ê²½ë¡œ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ì„ ìœ„í•œ ì‚¬ì „ ì§€ì‹ì„ í•™ìŠµí•  ê³„íšì…ë‹ˆë‹¤.
  * Mapì„ Gridë¡œ ë¶„í• í•´ Cell Intersection Test íšŸìˆ˜ë¥¼ ë” ì¤„ì´ê³  cellì˜ dataë¥¼ ê²½ëŸ‰í™” í•  ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.17
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ì—¬ëŸ¬ ì‹¤í—˜ì„ ê±°ì¹˜ë©° ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ëˆ„ì ë¼ 16ì¼ì€ ì½”ë“œë¥¼ ì¼ë¶€ ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.
  * ê°„ë‹¨í•˜ê²Œ xml í˜•ì‹ìœ¼ë¡œ obstacleì˜ ë°ì´í„°ë¥¼ save, loadí•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.(tinyxml2 ì‚¬ìš©) ì•„ë˜ ì´ë¯¸ì§€ëŠ” ì €ì¥ëœ ë°ì´í„° íŒŒì¼ì…ë‹ˆë‹¤.
    ![image](https://github.com/user-attachments/assets/0e7164e7-34e3-4eaf-9e14-86b736cef24f)
  * Dynamic Obstacleì˜ Navigation Mesh Update ì„±ëŠ¥ í™•ì¸ì„ ìœ„í•œ ì‘ì—…ì„ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ê³„íš ì¤‘ì¸ í…ŒìŠ¤íŠ¸ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
    1. ë‹¨ì¼ Obstacleì— ëŒ€í•´ ê°ë„, ìœ„ì¹˜ë“±ì„ ë³€ê²½í•˜ë©° ë§¤ í”„ë ˆì„ ì‚­ì œ->ì¬ìƒì„±ì˜ ì‘ì—…ì„ ë°˜ë³µí•©ë‹ˆë‹¤.
    2. ë³µìˆ˜ Obstacleì— ëŒ€í•´ ê°ë„, ìœ„ì¹˜ë“±ì„ ë³€ê²½í•˜ë©° ë§¤ í”„ë ˆì„ ì‚­ì œ->ì¬ìƒì„±ì˜ ì‘ì—…ì„ ë°˜ë³µí•©ë‹ˆë‹¤.
  * 1ë²ˆ í…ŒìŠ¤íŠ¸ì˜ ëŒ€ëµì ì¸ í˜•íƒœëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

    ![FPS_4411-RELEASE2024-07-1810-22-39-ezgif com-video-to-gif-converter (1)](https://github.com/user-attachments/assets/10aa57c4-d36a-475b-8d09-519110b15860)
    
  * 2ë²ˆ í…ŒìŠ¤íŠ¸ëŠ” ì•„ì§ ë³µìˆ˜ Obstacleì˜ ë™ì‹œ Updateë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ ì´í›„ì— í•¨ê»˜ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ìœ„ ì´ë¯¸ì§€(ì˜ìƒ)ì˜ ì‚¼ê°í˜• cellì˜ ê°¯ìˆ˜ëŠ” ë§ì§€ ì•Šì€ ë°ë‹¤ê°€(200~220ê°œ) ì´ì™¸ì— ì‹¤í–‰ì¤‘ì¸ ë¡œì§ì´ ê±°ì˜ ì „ë¬´í•˜ê¸° ë•Œë¬¸ì— ë” ë³µì¡í•œ ìƒí™©ì—ì„œì˜ ê²°ê³¼ë¥¼ ì •í™•íˆ ì˜ˆì¸¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ë§ˆìš°ìŠ¤ í”¼í‚¹ë§Œìœ¼ë¡œ obstacle ì˜ì—­ì„ ì§€ì •í•˜ëŠ” ê²ƒì€ ë„ˆë¬´ í”¼ë¡œë„ê°€ ë†’ê¸° ë•Œë¬¸ì— ë¯¸ë¤„ì™”ë˜ 3D Mesh Obstacleì„ ë°°ì¹˜í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
  * ê·¸ì „ì— Meshê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë§ì€ ì‚¼ê°í˜• cellì„ ìƒì„±í•˜ì§€ ì•Šë„ë¡ ë°©ì•ˆì„ ë§ˆë ¨í•  ê³„íšì…ë‹ˆë‹¤.
  * í˜„ì¬ obstacleì´ ìƒì„±ëœ ì˜ì—­ì˜ ì‚¼ê°í˜• cellì„ ê²€ì¶œí•˜ê¸° ìœ„í•´ ëª¨ë“  cellì„ ìˆœíšŒí•©ë‹ˆë‹¤. cellì„ ëŠ˜ë¦¬ê¸°ì „ì— ìš°ì„  ëŒ€ì•ˆì„ ë§ˆë ¨ì¤‘ì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.16
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * 2ì£¼ì°¨ ì£¼ê°„ íšŒì˜ í”¼ë“œë°±ì„ í†µí•´ ë‚¨ì€ 6ì£¼ê°„ ì–´ë–¤ì‹ìœ¼ë¡œ ê³¼ì œë¥¼ í•´ê²°í•´ ë‚˜ê°€ì•¼ í• ì§€ ê³ ë¯¼ì¤‘ì…ë‹ˆë‹¤.
    * ìš°ì„  ì§„í–‰ì¤‘ì¸ Dynamic Obstacleì— ëŒ€í•œ Update ê¸°ëŠ¥ì„ ë§ˆë¬´ë¦¬í•œ í›„ì—ëŠ”, ê²½ë¡œ íƒìƒ‰ì„ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤. ìµœëŒ€í•œ ì•ˆì •ì ì¸ ì„±ëŠ¥ì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•´ë³´ë ¤í•©ë‹ˆë‹¤.
    * ì´í›„ 2D ìƒì—ì„œ ì‘ë™í•˜ê³  ìˆëŠ” ì‹œìŠ¤í…œì„ 3Dì—ì„œë„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ê³ ë¯¼í•´ë³´ë ¤í•©ë‹ˆë‹¤.

  * ë™ì ìœ¼ë¡œ ì‚­ì œë˜ëŠ” obstacleì— ëŒ€í•´ ì£¼ë³€ì˜ cellë§Œ updateí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. obstacleì´ ì‚­ì œëœ ì˜ì—­ì˜ subsetë§Œì„ ë‹¤ì‹œ triangulationí•˜ëŠ” ê³¼ì •ì€ ëŒ€ì²´ë¡œ ìƒì„±ê³¼ì •ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ì¶”ê°€ë¡œ ê³ ë ¤í•  ë¶€ë¶„ì´ ìˆì—ˆìŠµë‹ˆë‹¤.
    1. subsetì˜ outlineì— ì™¸ë¶€ outlineë¿ ì•„ë‹ˆë¼ ë‚´ë¶€ holeì˜ì—­ì˜ outlineê¹Œì§€ í¬í•¨ë¼, ì´ë¥¼ ë°°ì œí•´ëŠ” ì‘ì—…ì´ í•„ìš”í•  ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
      * ë”°ë¼ì„œ ë‚´ë¶€ì˜ hole outlineì„ íŒë³„í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆìœ¼ë‚˜, ì‚¬ì‹¤ ì´ëŠ” ì „í˜€ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ì–´ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.
        * outlineì˜ ì •ë³´ë¥¼ ë³´ê´€í•˜ëŠ” mapìë£Œêµ¬ì¡°ëŠ” outlineì˜ ê° pointë¥¼ keyë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ë°ì´í„°ë¥¼ ì‚½ì… ì‹œ ì¢Œí‘œì— ì˜í•´ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬í•©ë‹ˆë‹¤.
        * ì–´ë–¤ ë‚´ë¶€ outline ì ë„ ì™¸ë¶€ outlineì˜ ê°€ì¥ ì¢Œì¸¡ ì ë³´ë‹¤ ì‘ì€ xê°’ì„ ê°€ì§ˆ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— mapì˜ ë°ì´í„°ëŠ” ë¬´ì¡°ê±´ ì™¸ë¶€ outlineì˜ ì ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.
    3. obstacleì˜ AABBì˜ì—­ê³¼ êµì°¨í•˜ëŠ” ì‚¼ê°í˜• cellì„ ì¶”ì¶œí•´ subsetì„ êµ¬ì„±í•  ë•Œ, subsetì´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •ë˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.
      * ì´ ê²½ìš° ë°”ë¡œ ìœ„ ë¬¸ì œ í•´ê²°ì˜ ë°˜ë¡€ê°€ ë  ìˆ˜ ìˆìœ¼ë©°, outlineì˜ ë‹¨ë°©í–¥ ì •ë ¬ê³¼ì •ì—ì„œ ì™¸ë¶€ outlineê³¼ ë‚´ë¶€ì˜ hole outlineì´ ì—°ê²°ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë˜í•œ Cellì´ ì¶©ë¶„íˆ ë³µì›ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
      * í•´ë‹¹ ì§€ì ì„ í¬í•¨í•˜ëŠ” ì‚¼ê°í˜•ì„ ì¶”ê°€ë¡œ íƒìƒ‰í•˜ëŠ” ë°©ì•ˆë„ ìƒê°í–ˆìœ¼ë‚˜, obstacleì˜ AABBë¥¼ ë¯¸ì„¸í•˜ê²Œ í™•ëŒ€í•´ ëª‡ ê°œì˜ ì‚¼ê°í˜•ì„ ë” í¬í•¨í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ë‹¨íˆ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì¸í•´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ì•„ì§ ì˜ˆìƒë˜ëŠ” ê²ƒì´ ì—†ìœ¼ë‚˜ ë§Œì— í•˜ë‚˜ ë°œìƒ ì‹œ ì´ ë¶€ë¶„ë§Œ ìˆ˜ì •í•  ìƒê°ì…ë‹ˆë‹¤.
        
      ![4](https://github.com/user-attachments/assets/377160c1-2dfd-44df-887a-46935a989a47)

  * Dynamic Obstacleì˜ Delete ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
    
    ![FPS_61-DEBUG2024-07-1617-54-17-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/94307766-acb6-4ae1-9f25-4416808aa066)

  * obstacle ë°ì´í„° save, load ê¸°ëŠ¥ ì¶”ê°€ ì¤‘ì…ë‹ˆë‹¤.(tinyxml2 ì‚¬ìš©)

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * obstacleì´ ê²¹ì¹ ì‹œ ìƒì„±, ì‚­ì œê°€ ì œ ê¸°ëŠ¥ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. íŠ¹íˆ ì‚­ì œ í›„ ë³µì›ì´ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ì „ë¶€í„° ì¸ì§€í•˜ê³  ìˆë˜ ë¬¸ì œì´ë¯€ë¡œ, obstacleì´ ì„œë¡œ ê²¹ì¹˜ì§€ ì•ŠëŠ” ìƒí™©ì—ì„œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í›„ í•´ê²°í•  ê³„íšì…ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * static obstacleì„ ë‹¤ìˆ˜ ë°°ì¹˜í•´ ì‹¤ì‹œê°„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤. ì´í›„ ìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.
  * ë™ì‹œì— ê²½ë¡œ íƒìƒ‰ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ê³„íšì…ë‹ˆë‹¤. ì´ ë¶€ë¶„ì€ ì§„í–‰í•˜ê²Œ ë˜ë©´ ê´€ë ¨ ì•Œê³ ë¦¬ì¦˜ì„ ì¶”ê°€ë¡œ ê³µë¶€í•  ê³„íšì…ë‹ˆë‹¤.
  
---
2ì£¼ì°¨ ì§„í–‰ ë‚´ìš© : https://equal-paw-e8f.notion.site/2-ab7058a10821484a9878ed1abdca29ac

---
# ğŸ“… 2024.07.15
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” obstacleì— ëŒ€í•´ ì£¼ë³€ì˜ cellë§Œ updateí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. obstacleì´ ì¶”ê°€ëœ ì˜ì—­ì˜ subsetë§Œì„ triangulationí•˜ëŠ” ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
    1. ìš°ì„  obstacleì˜ AABBì˜ì—­ê³¼ êµì°¨í•˜ëŠ” ì‚¼ê°í˜• cellì„ ì¶”ì¶œí•´ subsetì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
    2. subsetì˜ cellë“¤ ì¤‘, subsetì— í¬í•¨ë˜ì§€ ì•ŠëŠ” cellì„ neighborë¥¼ ë³´ìœ í•œ ê²½ìš° ì „ì²´ subsetì˜ outlineì„ êµ¬ì„±í•  ê°€ëŠ¥ì„±ì´ ìˆì„ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
    3. ë”°ë¼ì„œ í•´ë‹¹ edgeì™€ neighborì˜ ì •ë³´ë¥¼ ìë£Œêµ¬ì¡°ì— ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤. ì‹œì‘ pointë¥¼ key, ë pointì™€ neighborì˜ pairë¥¼ valueë¡œ mapì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.
    4. ì˜¬ë°”ë¥¸ triangluationì„ ìœ„í•´ mapì˜ edgeë¥¼ Clockwiseë¡œ ì •ë ¬í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  edgeì˜ ë°©í–¥ì€ ìƒì„± ì‹œ CWë¡œ ì •ë ¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— edgeì˜ ì—°ê²° ìˆœì„œë§Œ ì˜¬ë°”ë¥´ê²Œ ì§€ì •í•˜ë©´ ë©ë‹ˆë‹¤.
    5. mapì˜ keyëŠ” edgeì˜ ì‹œì‘ì ì´ê¸° ë•Œë¬¸ì— valueì˜ pair.firstì— ì €ì¥ëœ ëì ì„ ë‹¤ì‹œ keyë¡œ ê²€ìƒ‰ì„ ê³„ì†í•´ ì—°ê²°ëœ edgeì˜ listë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
    6. ì´ë ‡ê²Œ ì–»ì€ subsetì˜ edge listë¡œ Delaunay Triangulationì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.

       ![1](https://github.com/user-attachments/assets/d96e319c-4708-48ac-b70e-07fc73e17920)
       
    8. ì•„ë˜ëŠ” ì½”ë“œ ì˜ˆì‹œì…ë‹ˆë‹¤.
       
        ```
        set<CellData*> setIntersected;
        map<Vec3, pair<Vec3, CellData*>> mapOutlineCells;

        GetIntersectedCells(tObst, setIntersected);	// obstacleê³¼ êµì°¨í•˜ëŠ” ì‚¼ê°í˜• cell ì¶”ì¶œ
        for (auto tCell : setIntersected)
        {
        	for (uint8 i = 0; i < LINE_END; ++i) 	// neighborê°€ ìœ íš¨í•œ edge ì¶”ì¶œ
       		{
        		if (setIntersected.end() == setIntersected.find(tCell->arrNeighbors[i])) // í•´ë‹¹ edgeëŠ” outline
	  	        	{
	    			if (mapOutlineCells.end() == mapOutlineCells.find(tCell->vPoints[i]))	    			
	    			{
	      				mapOutlineCells.emplace(tCell->vPoints[i], pair(tCell->vPoints[(i + 1) % POINT_END], tCell->arrNeighbors[i]));
      				}
        		}
                }
        }
        
        vector<Vec3> vecOutlineCW;	// ì‹œê³„ ë°©í–¥ ì •ë ¬
        vecOutlineCW.push_back(mapOutlineCells.begin()->first);

        while (vecOutlineCW.size() < mapOutlineCells.size())
        {
        	auto pair = mapOutlineCells.find(vecOutlineCW.back());
        	if (mapOutlineCells.end() != pair)
        	{        	
        		vecOutlineCW.push_back(pair->second.first);
        	}
        }
  
    9. subsetì— ëŒ€í•œ triangulationì„ ìˆ˜í–‰í–ˆë‹¤ë©´, ê¸°ì¡´ ì˜ì—­ì˜ cellë“¤ì„ ì‚­ì œí•œ í›„ ìƒˆë¡œìš´ subsetìœ¼ë¡œ êµì²´í–ˆìŠµë‹ˆë‹¤.
    10. ìš°ì„  ìƒˆë¡œ êµ¬ì„±í•œ subsetì˜ cellë“¤ì˜ neighborë¥¼ ì „ë¶€ ì§€ì •í•˜ê³  ë‚˜ë©´, ìì—°ìŠ¤ëŸ½ê²Œ outlineì„ êµ¬ì„±í•˜ëŠ” edgeì˜ neighborëŠ” nullptrì¼ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
    11. ì´ nullptrìƒíƒœì¸ neighborë“¤ì€ ì´ì „ì˜ mapì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    12. mapì—ì„œ outline edgeì˜ ì‹œì‘ì ì„ keyë¡œ ê²€ìƒ‰í•´ êµ¬í•œ pairì˜ secondì—ëŠ” ì‹œì‘ì ê³¼ ëì ì´ ê°ê° key, pair.firstì¸ edgeì˜ neighborê°€ ë³´ê´€ë¼ ìˆìŠµë‹ˆë‹¤.
    13. ë”°ë¼ì„œ outline edgeë¥¼ í¬í•¨í•˜ëŠ” cellë“¤ë„ neighborë¥¼ ì§€ì •í•´ subset ì˜ì—­ì„ ê¸°ì¡´ ì˜ì—­ì— ë‹¤ì‹œ í†µí•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

        ![3](https://github.com/user-attachments/assets/0fc43855-0f1a-4037-9ed0-44cbbcd6d7ba)

  * ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. íŒŒë€ìƒ‰ ì˜ì—­ì€ ìƒˆë¡œ ê³„ì‚°ëœ ì˜ì—­ì…ë‹ˆë‹¤.
    
    ![FPS_61-DEBUG2024-07-1610-16-27-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/3a67dfec-7b67-407a-9baa-5ea55d6469bf)


  * ì²˜ìŒë¶€í„° ëª¨ë“  ê²ƒì„ ê³ ë ¤í•˜ê³  êµ¬í˜„í–ˆë˜ ê²ƒì´ ì•„ë‹ˆê¸°ì— ë°œìƒí•œ ë…¼ë¦¬ì  ë²„ê·¸ê°€ ë§ì•„ ë§ì€ ì‹œê°„ì„ ì†Œìš”í–ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
 
âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ë§¤ìš° ì–‡ê³  ê¸´ obstacleì„ ìƒì„±í•˜ë ¤í•  ë•Œ triangulationì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¬¸ì œê°€ ë  ì¼ì€ ê±°ì˜ ì—†ì„ ê²ƒ ê°™ì§€ë§Œ í›„ì— ì›ì¸ì„ íŒŒì•…í•´ë³´ë ¤ í•©ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ë™ì¼í•˜ê²Œ obstacle ì‚­ì œì‹œì—ë„ ì¼ë¶€ ì˜ì—­ë§Œì„ updateí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤. ì–¼í• ìƒê°í•´ì„œ ë¹„ìŠ·í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì€ë°, ë°©ì‹¬í•˜ì§€ ì•Šìœ¼ë ¤ í•©ë‹ˆë‹¤.
  
---
# ğŸ“… 2024.07.12
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * obstacleì˜ edgeë¥¼ í•˜ë‚˜ì”© ì¶”ê°€í•  ê²½ìš° ì´ìƒì´ ì—†ì§€ë§Œ í•œë²ˆì— edgeë¥¼ ì¶”ê°€í•œ ë’¤ triangulationì„ í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ holeì´ ìƒì„±ë˜ì§€ ì•Šì•˜ë˜ í˜„ìƒì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * holeì„ ì„¤ì •í•˜ê¸° ìœ„í•œ ë‚´ë¶€ì˜ ì ì„ ì°¾ëŠ” ê³¼ì •ì—ì„œ obstacleì˜ edgeë¥¼ êµ¬ì„±í•˜ëŠ” pointê°€ point listì— ì €ì¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
    * ë‚´ë¶€ ì ì„ ì°¾ê¸° ì´ì „ì— obstacleì˜ edgeë¥¼ ë¯¸ë¦¬ point listì— ì¶”ê°€í•¨ìœ¼ë¡œì„œ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
      ![FPS_60-DEBUG2024-07-1212-12-53-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/3bf92443-ff6a-4a06-8463-2aadf66b9483)
  * ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” obstacleì— ëŒ€í•´ navigation meshë¥¼ ìˆ˜ì •í•  ë•Œ, obstacle ì£¼ìœ„ì˜ cellë§Œ updateí•˜ë„ë¡ êµ¬í˜„ì¤‘ì…ë‹ˆë‹¤.
    * obstacle ì •ì ì„ í¬í•¨í•˜ëŠ” AABBì˜ì—­ê³¼ ê²¹ì¹˜ëŠ” ì‚¼ê°í˜• cellë“¤ì„ ì¶”ë ¤ êµ¬ì„±í•œ subsetì˜ outlineìœ¼ë¡œ triangulationì„ ìˆ˜í–‰í•œ í›„, ë‹¤ì‹œ ì›ë˜ì˜ ì „ì²´ meshì— í•©ì¹˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤.
    * ê°„ë‹¨í•œ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
      * obstacleì˜ì—­ê³¼ êµì°¨í•˜ëŠ” cellê³¼ outlineì„ ê³„ì‚°í•©ë‹ˆë‹¤.
        
        ![1](https://github.com/user-attachments/assets/1270518f-3578-455f-a0b6-734f34b79ec8)
      
      * í•´ë‹¹ ì˜ì—­ì—ì„œ triangulationì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
        
        ![2](https://github.com/user-attachments/assets/708478b4-ee94-4a71-8727-2225dde9a640)
      
      * ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì›ë˜ì˜ ì „ì²´ meshì— í•©ì¹œ í›„, neighborë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
        
        ![3](https://github.com/user-attachments/assets/e91a2886-ccbf-4b21-87f1-4b69e9244cee)
      
      * í˜„ì¬ ì–´ëŠì •ë„ ì§„í–‰ì´ ë˜ì—ˆìœ¼ë‚˜ outlineì˜ ì‹œê³„ë°©í–¥ ì •ë ¬ ë“± ì²˜ë¦¬í•´ì•¼í•  ì‘ì—…ì´ ë‚¨ì•„ êµ¬í˜„ì¤‘ì…ë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * ë¶ˆí•„ìš”í•œ ì‚¼ê°í˜•ì´ ì¶”ê°€ë¡œ ìƒì„±ë˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ ì •ì ì˜ ë°°ì¹˜ ìˆœì„œê°€ ì¼ì •í•˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤. outlineì˜ ì •ë ¬ ìƒíƒœë¶€í„° ì ê²€í•´ ìˆ˜ì •í•  ê³„íšì…ë‹ˆë‹¤.
  * ë™ì ìœ¼ë¡œ navigation meshë¥¼ ê°±ì‹ í•˜ëŠ” ì‘ì—…ì´ ìƒê°ë³´ë‹¤ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ì´ ë§ì€ ê²ƒ ê°™ì•„ ì‹œê°„ì„ ë” íˆ¬ìí•´ ì‹ ì¤‘í•˜ê²Œ ì‘ì—…í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.
  * hole ì˜ì—­ì„ ë¹„ì›Œë‘˜ í•„ìš”ê°€ ìˆëŠ”ì§€ ì¬ê³ í•´ë³´ì•„ì•¼ í• ê²ƒ ê°™ìŠµë‹ˆë‹¤. êµ³ì´ ë¹ˆ ê³µê°„ìœ¼ë¡œ ë‘ì§€ ì•Šê³  ì†ì„±ì„ ë¶€ì—¬í•´ obstacleì˜ì—­ì„ì„ êµ¬ë¶„í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ ë” ìƒê°í•´ë³´ë ¤í•©ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * ì •ìƒì ìœ¼ë¡œ ì¶”ê°€ê°€ ëœë‹¤ë©´, obstacle ì‚­ì œ ì‹œ ë™ì  ì—…ë°ì´íŠ¸ ë˜í•œ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
  * ë°©í–¥ì„ ìˆ˜ì •í•˜ê³  ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªìœ¼ë©´ì„œ ë¹„íš¨ìœ¨ì ì´ê³  ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ë§ì´ ìƒì„±ë¼, obstacle ì œê±° êµ¬í˜„ì „ì— ì´í›„ ì‘ì—…ì˜ í¸ì˜ë¥¼ ìœ„í•´ êµ¬ì¡°ë¥¼ í•œ ë²ˆ ì •ë¦¬í•  ê³„íšì…ë‹ˆë‹¤.
    
---
  * ~~240712 ìƒê° ë©”ëª¨...~~
    * ~~obstacleì„ ì¶”ê°€í•œ ì˜ì—­ì— ëŒ€í•´ì„œë§Œ triangle ê°±ì‹ .~~
      * ~~ìƒê°ë³´ë‹¤ ì–´ë µë‹¤...~~
    * ~~ì „ì²´ ë§µì˜ edge point ìˆ˜ëŠ” ë³€í•˜ì§€ ì•ŠìŒ.~~
      * ~~ë”°ë¼ì„œ ìˆ˜ì •í•  ë¶€ë¶„ì€ pointcount ì´í›„..?~~
    * ~~obstacle ì˜ì—­ì„ í¬í•¨í•˜ëŠ” ì‚¼ê°í˜•ì„ ì–´ë–»ê²Œë“  êµ¬í•˜ì.~~
    * ~~ë§µì— gridë¥¼ ì ìš©?~~
      * ~~ê° cellì€ ì–´ë–¤ ì‚¼ê°í˜•ì„ í¬í•¨í•˜ëŠ”ì§€ ë³´ìœ í•˜ë„ë¡ -> obstacleì´ ìœ„ì¹˜í•œ ê·¸ë¦¬ë“œì˜ ì‚¼ê°í˜•ë§Œì„ ê°€ì§€ê³  ì™€ì„œ triangulation.~~
      	* ~~í˜¹ì€, ìµœëŒ€, ìµœì†Œ ê°€ë¡œ ì„¸ë¡œ ìœ„ì¹˜ì˜ AABBë¥¼ ê°€ì§€ê³  ì¢€ ë” ë„“ì€ ì˜ì—­ì˜ ì‚¼ê°í˜•ì„ triangulation. -> max x, z / mix x, z~~
    * ~~inì—ëŠ” ì „ì²´ ë§µì— ëŒ€í•œ ì´ˆê¸° point listëŠ” ì–´ì°¨í”¼ (ì‚¬ê°í˜•ì´ë¼ ê°€ì •í•˜ë©´) 8ê°œ ê³ ì •. ì´í›„ë¶€í„° obstacleì˜ point. ì´ ì¤‘ íŠ¹ì • obstacleì˜ pointë¥¼ ì°¾ì•„ë‚´ëŠ”ê±´ ê°€ëŠ¥í•¨.~~
    * ~~ìš°ì„  neighborë“¤ê¹Œì§€ ì „ë¶€ ì„¤ì •ëœ ë„¤ë¹„ê²Œì´ì…˜ ë©”ì‰¬ë¥¼ ë§Œë“¤ì–´ì•¼í•¨.~~
    * ~~obstacleê³¼ ê²¹ì¹˜ëŠ” ì‚¼ê°í˜•ì˜ ì¢Œí‘œë¥¼ ê°€ì§€ê³  ì™€ì„œ triangulation ìˆ˜í–‰. ê²°ê³¼ë¥¼ ì›ë˜ ì˜ì—­ì— ë¶™ì—¬ë„£ì–´ì•¼í•¨.~~
    * ~~ì›ë˜ ì˜ì—­ì˜ neighborì™€ ìƒˆë¡œ ë¶„í• ëœ ì˜ì—­ì˜ edgeë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒì€ ì–´ë µì§€ ì•ŠìŒ. edgeì™€ ë‹¿ì•„ ìˆëŠ” ì‚¼ê°í˜•ë“¤ì€ neighborë¥¼ ë‹¤ì‹œ ëŒë ¤ì£¼ë©´ ë˜ê³  ë‚˜ë¨¸ì§€ëŠ” ê·¸ëƒ¥ ìê¸°ë“¤ë¼ë¦¬ ì´ì–´ì£¼ë©´ ëœë‹¤.~~
    * ~~ì¼ë‹¨ í•´ë³´ì!~~

---
# ğŸ“… 2024.07.11
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * obstacleì˜ edgeê°€ convexí•˜ì§€ ì•Šì€ ê²½ìš° ì˜ì—­ì˜ ë‚´ë¶€ì™€ ì™¸ë¶€ê°€ ë’¤ë°”ë€ŒëŠ” í˜„ìƒì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * triangle libraryì—ì„œëŠ” obstacle ì˜ì—­ì„ ì§€ì •í•˜ê¸° ìœ„í•´ ë‚´ë¶€ì˜ í•œ ì ì´ í•„ìš”í•œë°, ê¸°ì¡´ì—ëŠ” ì´ë¥¼ ê°„ë‹¨íˆ ë¬´ê²Œ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
    * ë³¼ë¡ ë‹¤ê°í˜•ì´ ì•„ë‹Œ ê²½ìš° í˜•íƒœì— ë”°ë¼ ë¬´ê²Œ ì¤‘ì‹¬ì˜ ìœ„ì¹˜ê°€ ë‹¤ê°í˜•ì˜ ì™¸ë¶€ì— ìˆì„ ìˆ˜ë„ ìˆìŒì„ ê³ ë ¤í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.(ex. ë„ë„›)
      
      ![FPS_61-DEBUG2024-07-1118-46-08-ezgif com-video-to-gif-converter](https://github.com/ksg1766/Navigation_System/assets/37239034/797257b8-98dc-4644-be74-e6bcd914b5f0)

    * ì²˜ìŒì—ëŠ” obstacle ì˜ì—­ì— ëŒ€í•´ triangulationì„ í•œ ë²ˆ ë” ì§„í–‰í•˜ëŠ” ë°©ì‹ì„ ê³ ë ¤í–ˆìœ¼ë‚˜, ì‹œê°„ ë° ê³µê°„ íš¨ìœ¨ì´ ë‚®ì•„ ë‹¤ë¥¸ ë°©ë²•ì„ ê³ ë ¤í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
    * ëª¨ë“  ë‹¤ê°í˜•ì€ ì‚¼ê°í˜•ìœ¼ë¡œ ë¶„í•  ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ì¡´ì¬í•  convex ì§€ì ì„ ì°¾ì•„ ë¬´ê²Œ ì¤‘ì‹¬ì„ êµ¬í•˜ë©´ í•´ë‹¹ ì ì€ ë‹¤ê°í˜•ì˜ ë‚´ë¶€ì— ìœ„ì¹˜í•  ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
    * í•œ ì ì—ì„œ ì¶œë°œí•œ ë°˜ì§ì„ ì´ ë‹¤ê°í˜•ê³¼ ì§ìˆ˜ ë²ˆ êµì°¨í•œë‹¤ë©´ ì ì€ ì™¸ë¶€ì—, í™€ìˆ˜ ë²ˆ êµì°¨í•œë‹¤ë©´ ë‚´ë¶€ì— ì¡´ì¬í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤.

      ![image](https://github.com/ksg1766/Navigation_System/assets/37239034/7168ef78-09e5-49c0-be51-f49695824aec)

    * ëª¨ë“  ì˜ì—­ì— ëŒ€í•œ triangulationì€ ìˆ˜í–‰í•˜ì§€ ì•Šì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. êµ¬í˜„ë¶€ëŠ” ëŒ€ëµ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
		```
		for (_int i = 0; i < tObst.numberof; ++i) // numberof : ì •ì ì˜ ê°¯ìˆ˜
		{
			Vec3 vCenter = Vec3::Zero;

			for(_int j = 0; j < 3; ++j)
			{
				vCenter.x += m_tDT_in.pointlist[tObst.start + (2 * (i + j)) % (2 * tObst.numberof)];
				vCenter.z += m_tDT_in.pointlist[tObst.start + (2 * (i + j) + 1) % (2 * tObst.numberof)];
			}	// ì‚¼ê°í˜•ê³¼ ê°™ì€ ë‹¨ìˆœí•œ í˜•íƒœì˜ ë‹¤ê°í˜•ì€ í•œ ë²ˆì— ë‚´ë¶€ ì ì„ ë°œê²¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—
  				// í•œë°”í€´ ëŒë©° ì¤‘ë³µìœ¼ë¡œ ì •ì ì„ ì„ íƒí•  ìˆ˜ ìˆëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ëŠ” í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

			vCenter /= 3.f;

			// RayCast
			_int iCrosses = 0;

			for (_int m = 0; m < tObst.numberof; ++m)
			{
				_int idxX = tObst.start + (2 * m) % (2 * tObst.numberof);
				_int idxZ = tObst.start + (2 * m + 1) % (2 * tObst.numberof);

				_float fSourX = m_tDT_in.pointlist[idxX];
				_float fSourZ = m_tDT_in.pointlist[idxZ];

				idxX = tObst.start + (2 * m + 2) % (2 * tObst.numberof);
				idxZ = tObst.start + (2 * m + 3) % (2 * tObst.numberof);

				_float fDestX = m_tDT_in.pointlist[idxX];
				_float fDestZ = m_tDT_in.pointlist[idxZ];

				if ((fSourX > vCenter.x) != (fDestX > vCenter.x))	// x ì¢Œí‘œ ê²€ì‚¬
				{
					_float fAtZ = (fDestZ - fSourZ) * (vCenter.x - fSourX) / (fDestX - fSourX) + fSourZ; 

					if (vCenter.z < fAtZ)	// z ì¢Œí‘œ ê²€ì‚¬
					{
						++iCrosses;
					}
				}
			}

			if (0 < iCrosses % 2)
			{
				tObst.center = vCenter;
				break;
			}
		}
		```
    * ëª¨ë“  ì‚¼ê°í˜•ì„ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´, ë°°ì¹˜ë  obstacleì„ í¬í•¨í•˜ëŠ” ì‚¼ê°í˜•ë§Œì„ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ê³„íš ì¤‘ì…ë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * obstacleì˜ edgeë¥¼ í•˜ë‚˜ì”© ì¶”ê°€í•  ê²½ìš° ì´ìƒì´ ì—†ì§€ë§Œ í•œë²ˆì— edgeë¥¼ ì¶”ê°€í•œ ë’¤ triangulationì„ í•˜ë©´ holeì´ ìƒì„±ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  * ëˆ„ë½í•œ ë¶€ë¶„ì´ ìˆëŠ”ì§€ íƒìƒ‰ ì¤‘ì…ë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
  * obstacle ì •ì ì„ í•˜ë‚˜ì”© ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ 3D ì˜¤ë¸Œì íŠ¸ë¥¼ ë°°ì¹˜í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„ ì‚¬í•­ì„ ë³€ê²½ ê³„íšì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì•ì„œ ì–¸ê¸‰í•œ ë¬¸ì œë¥¼ ìš°ì„  í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤.
  * ëª¨ë“  ì‚¼ê°í˜•ì„ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´, ë°°ì¹˜ë  obstacleì„ í¬í•¨í•˜ëŠ” ì‚¼ê°í˜•ë§Œì„ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ êµ¬í˜„í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.10
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * ì‚¼ê°í˜•ìœ¼ë¡œ í˜•ì„±ëœ ì§€í˜•ì— obstacle ì˜ì—­ì„ ì¶”ê°€í–ˆì„ ë•Œ, í•´ë‹¹ ì˜ì—­ì— ë¹„ì–´ìˆëŠ” holeì„ í˜•ì„±í•˜ë„ë¡(triangulationì„ ìˆ˜í–‰í•˜ì§€ ì•Šë„ë¡) êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
  * triangle libraryëŠ” Constrainted Delaunay Triangleì„ ìƒì„±í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ì œí•œëœ ì˜ì—­ ë‚´ì—ì„œ triangulationì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì˜ì—­ì˜ edgeë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
  * segment listëŠ” ì˜ì—­ì˜ edgeë¥¼ ê²°ì •í•˜ëŠ” ì •ì ì˜ indexë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì°¸ê³ í• ë§Œí•œ ë ˆí¼ëŸ°ìŠ¤ë‚˜ ì˜ˆì œê°€ ë§ì§€ ì•Šì•„ ì§ì ‘ ë„í˜•ì„ ê·¸ë ¤ë³´ë©° ë™ì‘ ë°©ì‹ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤.
  * ë”°ë¼ì„œ ì „ì²´ ë§µ(ì§€í˜•)ì˜ edgeë¥¼ êµ¬ì„±í•˜ëŠ” ì •ì ì˜ indexë¥¼ segment listì— ì¶”ê°€í•œ í›„, obstacle ì˜ì—­ edgeì˜ ì •ì  indexë¥¼ segment listì— ì¶”ê°€í•´ ì˜ì—­ì„ êµ¬ë¶„í–ˆìŠµë‹ˆë‹¤.
    ```
    // Points
	for (_int i = 0; i < LastIndex_Terrain; ++i)
	{
		m_tDT_in.segmentlist[2 * i]     = i;
		m_tDT_in.segmentlist[2 * i + 1] = i + 1;
	}
	m_tDT_in.segmentlist[2 * LastIndex_Terrain]     = LastIndex_Terrain;
	m_tDT_in.segmentlist[2 * LastIndex_Terrain + 1] = 0;
		
	// Obstacles
	for (_int j = 0; j < m_vecObstacles.size(); ++j)
	{			
		for (_int i = 0; i < m_vecObstacles[j].numberof - 1; ++i)
		{
			m_tDT_in.segmentlist[FirstIndex + 2 * i]     = FirstIndex / 2 + i;
			m_tDT_in.segmentlist[FirstIndex + 2 * i + 1] = FirstIndex / 2 + i + 1;
		}
		m_tDT_in.segmentlist[LastIndex - 1] = LastIndex / 2;
		m_tDT_in.segmentlist[LastIndex]     = FirstIndex / 2;
	}
    ```
  * ìœ„ì—ì„œ ì§€ì •í•œ obstacleì˜ì—­ì„ í˜•ì„±í•˜ëŠ” segmentë“¤ì˜ ë‚´ë¶€ì— hole listì˜ ì •ì ì„ ìœ„ì¹˜ì‹œí‚¤ë©´ í•´ë‹¹ ì˜ì—­ ë‚´ë¶€ì—ì„œëŠ” triangulationì´ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
    ```
    m_tDT_in.numberofholes = m_vecObstacles.size();
    if (0 < m_tDT_in.numberofholes)
    {
		SAFE_REALLOC(TRI_REAL, m_tDT_in.holelist, m_tDT_in.numberofholes * 2)

		for (_int i = 0; i < m_tDT_in.numberofholes; ++i)
		{
			m_tDT_in.holelist[2 * i + 0] = m_vecObstacles[i].center.x;
			m_tDT_in.holelist[2 * i + 1] = m_vecObstacles[i].center.z;
		}
    }
    ```      
  * ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
    
    ![FPS_61-DEBUG2024-07-1110-29-56-ezgif com-video-to-gif-converter](https://github.com/ksg1766/Navigation_System/assets/37239034/9eea5ec5-55fd-4378-9f63-1d2a3ead0fbe)
      
  * ìƒˆë¡œìš´ ì •ì  ë° segment ë°ì´í„° ë“±ì„ ì¶”ê°€ í•  ë•Œ, mallocì´ ì•„ë‹Œ reallocì„ í†µí•´ ë§¤ë²ˆ ëª¨ë“  ì •ì  ë°ì´í„°ë¥¼ ë‹¤ì‹œ í• ë‹¹í•˜ì§€ ì•Šê³  ê°±ì‹  ë°ì´í„°ë§Œ ì¶”ê°€í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
    * realloc í• ë‹¹ ì‹¤íŒ¨ ì‹œ ì£¼ì†Œì™€ ë°ì´í„°ê°€ ì´ë™í•  ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë¯€ë¡œ ì´í›„ ì¶”ê°€ë¡œ ìƒê°í•´ë³´ë ¤í•©ë‹ˆë‹¤.
  * ëª¨ë“  ì§€í˜•ê³¼ obstacleì˜ edge ì •ì  ë°ì´í„°ëŠ” ë‹¨ì¼ point listì— í•¨ê»˜ ì €ì¥ë˜ê¸° ë•Œë¬¸ì—, ì§€í˜•ì˜ edge pointsë¥¼ ì „ë¶€ ì €ì¥í•œ ë’¤ì— obstacleì˜ edge pointsë¥¼ ì €ì¥í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
    * ì´í›„ ê³¼ì •ì˜ í¸ì˜ì„±ì— ì˜í–¥ì„ ë¯¸ì¹ ì§€ ê½¤ ì˜¤ë˜ ê³ ë¯¼í•´ë´¤ëŠ”ë°, ì§€í˜•ë°ì´í„°ë¥¼ ì…ë ¥í•˜ëŠ” ë„ì¤‘ì— ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€ë•ìœ¼ë¡œ obstacle ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  ë‹¤ì‹œ ì§€í˜• ë°ì´í„°ë¥¼ ì…ë ¥í•  ì¼ì€ ì—†ì„ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
    * ì§€í˜• ë°ì´í„°ê°€ obstacle ë°ì´í„°ì— ì˜í•´ ë¶„ì‚°ë˜ë©´ obstacle ìˆ˜ì— ë”°ë¼ ìºì‹œ íš¨ìœ¨ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.
    * ë¬¼ë¡  ì…ë ¥ë°›ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë©”ëª¨ë¦¬ë¥¼ ì •ë ¬í•  ìˆ˜ë„ ìˆì§€ë§Œ ì–´ë–»ê²Œ ë´ë„ íš¨ìœ¨ì´ ì¢‹ì§€ ì•Šì€ê²ƒ ê°™ì•„ ë°ì´í„° ì…ë ¥ ìˆœì„œëŠ” ê³ ì •í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
  * obstacleì˜ edgeê°€ convexí•˜ì§€ ì•Šì€ ê²½ìš° ì˜ì—­ì˜ ë‚´ë¶€ê°€ ì˜ëª» ê³„ì‚° ë˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.
    * ì˜ì—­ ë‚´ë¶€ì˜ ì¤‘ì‹¬ ì¢Œí‘œë¡œ ë¬´ê²Œì¤‘ì‹¬ ì¢Œí‘œë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, convexí•˜ì§€ ì•Šì€ ë‹¤ê°í˜•ì˜ ê²½ìš° ì™¸ë¶€ì— ë¬´ê²Œì¤‘ì‹¬ ì¢Œí‘œê°€ ê³„ì‚°ë˜ëŠ” ê²½ìš°ë¥¼ ê³ ë ¤í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.
    * ë‹¤ê°í˜•ì„ ë¶„í•  í•´ì„œ ë‚´ë¶€ì˜ ì ì„ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.
      
      ![FPS_61-DEBUG2024-07-1110-35-13-ezgif com-speed](https://github.com/ksg1766/Navigation_System/assets/37239034/77b2232b-b291-4410-9ce5-c2c02c037e93)

âš½ ì´í›„ ê³„íš
  * ì˜¤ëŠ˜ì€ ìš°ì„  ë°œê²¬ëœ ë¬¸ì œë¶€í„° í•´ê²°í•˜ëŠ” ê²ƒì— ì§‘ì¤‘í•  ê³„íšì…ë‹ˆë‹¤.
  * obstacle ì˜ì—­ì„ ì •ìƒì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤ë©´ ë™ì ìœ¼ë¡œ ê°±ì‹ ë˜ëŠ” ê²½ìš°ì— ëª¨ë“  ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šê³  obstacle ì£¼ë³€ì˜ ì˜ì—­ë§Œ ê°±ì‹ í•˜ë„ë¡ ìµœì í™”í•  ê³„íšì…ë‹ˆë‹¤.
  * í˜¹ì€ A navigation mesh for dynamic environments. (Wouter G. van Toll et Al.) ì—ì„œ ì œì•ˆëœ ë°©ì‹ì„ ê³ ë ¤í•´ Voronoi Diagramë§Œì„ ê°±ì‹ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê³ ë ¤í•´ë³¼ ê³„íšì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.09
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * Delaunay Triangle ì˜ ì •ì ë°ì´í„° ì¶”ê°€ ì‹œ 4ë²ˆì§¸ í˜¹ì€ ê·¸ ì´í›„ë¶€í„° í™ ì˜¤ë²„í”Œë¡œìš° ë°œìƒí•˜ëŠ” í˜„ìƒì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * ë¶„ì„ ë° í•´ê²°
      1. ì‚¼ê°í˜•ì„ êµ¬ì„±í•  edgeì˜ ìˆœì„œì™€ ê°ë„ì— ë”°ë¼, 4ë²ˆì§¸ ì •ì ë¶€í„°ëŠ” ë„í˜•ì˜ í˜•íƒœì— ë”°ë¼ ì¶”ê°€ edgeë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
         ![image](https://github.com/ksg1766/Navigation_System/assets/37239034/63962073-9114-4675-b683-589cb604cbf4) fig 1. 5ê°œì˜ edges ![image](https://github.com/ksg1766/Navigation_System/assets/37239034/e363f2f2-96be-437b-8857-f51127f9c7a2) fig 2. 6ê°œì˜ edges
      3. ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ ì…ë ¥ ì •ì  ë°ì´í„°ì˜ ì˜ëª»ëœ ë°°ì—´ ì ‘ê·¼ìœ¼ë¡œ ìƒê° -> ì‹¤ì œë¡œë„ ì½”ë“œìƒì˜ ì˜¤ë¥˜ê°€ ìˆì—ˆê³  ì´í›„ 'ìš°ì—°íˆ ì—°ì†ìœ¼ë¡œ' ë‘”ê°ìœ¼ë¡œ ì •ì ì„ ìƒì„±í•˜ë©´ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
      4. í•´ê²°í–ˆë‹¤ê³  ì°©ê°í–ˆìœ¼ë‚˜ ì´í›„ ê°™ì€ ë¬¸ì œ ê³„ì† ë°œìƒ -> triangulate í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” ë¬¸ìì—´ flagë°ì´í„°(í•„ìš”í•œ output ë°ì´í„° ì„¤ì •)ì— ì˜¤ë¥˜ê°€ ìˆëŠ”ì§€ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì „ë¶€ í™•ì¸í•´ ë´¤ì§€ë§Œ ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
      5. Triangulationì„ ìˆ˜í–‰í•˜ê³  Voronoi Diagramì„ ìƒì„±í•˜ëŠ” triangulate í•¨ìˆ˜ê°€ ì•Œê³  ìˆë˜ ê²ƒë³´ë‹¤ ë” ë§ì€ ë°ì´í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.(ex. ì‚¼ê°í˜• ì˜ì—­ list, ì‚¼ê°í˜•ì„ ìƒì„±í•˜ì§€ ì•Šì„ ë¹ˆ ì˜ì—­ list ë“±).
      6. ë‚´ë¶€ì ìœ¼ë¡œ ê¸°ì¡´ì— ì´í•´í•œ ê²ƒë³´ë‹¤ ë§ì€ ì¢…ë¥˜ì˜ ë°ì´í„°ë¥¼ ìƒì„±í•´, ëª…ì‹œì ìœ¼ë¡œ ëª¨ë“  malloc ë°ì´í„°ì— ëŒ€í•´ freeë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•„ ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
      7. triangulateio êµ¬ì¡°ì²´ì˜ ë™ì  í• ë‹¹ ê°€ëŠ¥í•œ ëª¨ë“  listë°ì´í„°ì— ëŒ€í•´ null check í›„ freeë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
    * Triangle ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì´í•´ë„ ë¶€ì¡±ê³¼ ë¬¸ì œì— ëŒ€í•œ 1ì°¨ì›ì ì¸ ì ‘ê·¼ìœ¼ë¡œ í•„ìš” ì´ìƒì˜ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í–ˆìŠµë‹ˆë‹¤.
   
âš½ ì´í›„ ê³„íš
  * ë‹¤ìˆ˜ ì •ì ê³¼ ì‚¼ê°í˜• ìƒì„±ì— ë¬¸ì œê°€ ì—†ìŒì„ í™•ì¸í–ˆìœ¼ë¯€ë¡œ, ì§€í˜• Meshë¥¼ ì´ìš©í•´ ì‚¼ê°í˜• ë°ì´í„° ìƒì„± ê°€ëŠ¥í•œì§€ í™•ì¸.
  * ì‚¼ê°í˜•ì„ ìƒì„±í•˜ì§€ ì•Šì„ ë¹ˆ ì˜ì—­(obstacle ì˜ì—­)ì— ëŒ€í•œ ì²˜ë¦¬ ë° obstacle ë°°ì¹˜ í›„ Triangle list ê°±ì‹ í•˜ë„ë¡ êµ¬í˜„.
  * Triangulationì´ ì§„í–‰ëœ ì‚¼ê°í˜•ë“¤ì— ëŒ€í•´ Neighbor ì„¤ì •ë˜ë„ë¡ êµ¬í˜„.

---
# ğŸ“… 2024.07.08
ğŸ“‹ ì§„í–‰ ì‚¬í•­
  * Pickingì„ í†µí•œ Delaunay Triangulation, Voronoi Diagram.([Triangle Library](https://github.com/libigl/triangle.git) ì‚¬ìš© )
![FPS_61-DEBUG2024-07-0910-59-38-ezgif com-speed](https://github.com/ksg1766/Navigation_System/assets/37239034/5ca33f72-e29d-4732-b722-535929e7df46)
 * ~~Boost Library ì¶”ê°€ (polygon/voronoi.hpp ì‚¬ìš© ìœ„í•´)~~ -> Triangle Libë¡œ ëŒ€ì²´ í›„ ì‚¬ìš©í•˜ì§€ ì•Šê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

âš½ ì´í›„ ê³„íš
 * Triangle Data Save/Load ë° ì¶œë ¥
 * Mesh í†µí•´ ì–»ì€ Triangle Data Save/Load ë° ì¶œë ¥

âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
 * ~~íŠ¹ì • ì‹œì  ì •ì  ì¶”ê°€ì‹œ í„°ì§. ì›ì¸ ì°¾ëŠ” ì¤‘ì…ë‹ˆë‹¤.~~

---
# ğŸ“… 2024.07.05
:clipboard: ì§„í–‰ ì‚¬í•­
  * Slopeì— ë”°ë¼ ë©”ì‰¬ ì¶”ë¦¬ê¸°.
  * AABB ë°”ìš´ë”© ë³¼ë¥¨ë‚´ì—ì„œë§Œ ì‚¼ê°í˜• ìƒì„±í•˜ë„ë¡ ì œí•œ.
  * ë‚®ì€ ë†’ì´ í„± ì‚¼ê°í˜•ì€ í¬í•¨í•˜ë„ë¡ êµ¬í˜„.
![climb](https://github.com/ksg1766/Navigation_System/assets/37239034/3904964d-7b49-4b0a-be59-0efbac5e71e4)

:soccer: 2ì£¼ì°¨ ëª©í‘œ
   * ì‚¼ê°í˜• ì¶”ë ¤ë‚´ëŠ” ì‘ì—…ì˜ íš¨ìœ¨ì´ ë‚®ì•„ ëª©í‘œì™€ ìš°ì„  ìˆœìœ„ë¥¼ ê³ ë ¤í•´ Delaunay Triangulation ìš°ì„  êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤.
   * Obstacle ì •ì  ì¶”ê°€, ì‚­ì œ ì‹œ Cell ì¬êµ¬ì„± ë˜ë„ë¡ êµ¬í˜„ ê³„íšì…ë‹ˆë‹¤.

  * ì£¼ìš” ë³€ê²½ ì‚¬í•­
    * CNavMeshView::BakeNavMesh()
      * climb ê°€ëŠ¥í•œ ë†’ì´ ì¶”ë ¤ë‚´ëŠ” ì‘ì—….
      * m_tNavMeshBoundVolumeìœ¼ë¡œ ì¶”ë ¤ë‚´ëŠ” ì‘ì—….
    * CNavMeshView::SetUpNeighbor()
      * ì‚¼ê°í˜• Neighbor ì—°ê²°í•¨ìˆ˜ ì¶”ê°€.

  âš ï¸ ë°œê²¬ëœ ë¬¸ì œ
    * Climb ê°€ëŠ¥í•œ ì‚¼ê°í˜• ì„¤ì • ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ì‚¼ê°í˜• ì¶”ê°€.
    * ìµœì í™”ê°€ ì „í˜€ ì•ˆë¼ ì†ë„ê°€ ë„ˆë¬´ ëŠë¦¼.
    * 2ì£¼ì°¨ ëª©í‘œ ì§„í–‰ì— ì¹˜ëª…ì ì¸ ì§€ì¥ì€ ì—†ìœ¼ë¯€ë¡œ ë³‘í–‰í•´ì„œ í•´ê²°í•  ê³„íšì…ë‹ˆë‹¤.

---
  * ~~240705 ìƒê° ë©”ëª¨...~~
    * ~~ë¶ˆí•„ìš”í•œ ì‚¼ê°í˜•ì„ í˜•ì„±í•˜ëŠ” ì •ì  ì‚­ì œí•´ì•¼ í•¨. (ex. ê¸‰ê²½ì‚¬ or ì²œì •) ì‚¼ê°í˜•ì´ í…Œë‘ë¦¬ì— ìœ„ì¹˜í•´ ìˆê³ (neighborê°€ 3 ë¯¸ë§Œì¸ ê²½ìš°) ë©´ì ì´ ë¬´ì‹œí• ë§Œ í•œ ê²½ìš° ì‚­ì œ í• ê²ƒì¸ê°€~~
    * ~~ë§¤ìš° ì‘ì€ êµ­ì†Œ ì˜ì—­ì— ëŒ€í•œ ì²˜ë¦¬ëŠ” ì–´ë–»ê²Œ í•  ê²ƒì¸ì§€?~~
      * ~~ë²½ë©´ìœ¼ë¡œ ë¶€í„° íŠ€ì–´ë‚˜ì˜¨ ë²½ëŒì˜ ìœ—ë©´ ë“± -> ë§ì€ ê²Œì„ì—ì„œ ì´ëŸ° ì§€í˜•ì„ ì˜¬ë¼íƒˆ ìˆ˜ ìˆìŒ.~~
      * ~~ì…ë ¥ê°’ ì´í•˜ í¬ê¸° ì‚¼ê°í˜•ì€ ì•„ì˜ˆ ì‚­ì œ -> ë³´ì´ì§€ë„ ì•ŠëŠ” ëŒë©©ì´ì— ê²°ë ¤ ëª»ì›€ì§ì´ëŠ” ê²½ìš° ë°©ì§€. ì—”ì§„ì—ì„œ NavMeshë¥¼ Bakeí•˜ë©´ ì‘ì€ ì‹ìƒì—ë„ ê±¸ë ¤ ëª»ì§€ë‚˜ê°€ëŠ”ê²Œ ê¸°ë³¸. ì¡°ê¸ˆ ë” ìƒê°í•´ë³´ì.~~
    * ~~ìµœì¢…ì ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì •ì  ìµœëŒ€í•œ ì‚­ì œ í›„ Delaunay Triangulation ìˆ˜í–‰.~~
    * ~~ë¬´ì‹œí•´ì•¼í•  ì˜¤ë¸Œì íŠ¸ëŠ” ì–´ë–¤ ê²½ìš°?~~
    * ~~EmeraldSquare Sceneì—ì„œ DebugDrawì˜ Triangle Draw Call íšŸìˆ˜ê°€ ë„ˆë¬´ ë§ìŒ. -> LINESTRIPì´ë¼ BackFaceê°€ ì—†ìŒ. ì§ì ‘ ê·¸ë ¤ì•¼ í•¨.~~
    * ~~slope ê´€ë ¨ ì‘ì—…ì€ ì´ë²ˆì£¼ê¹Œì§€...~~

---
# ğŸ“… 2024.07.04
:clipboard: ì§„í–‰ ì‚¬í•­
  * ë¦¬ì†ŒìŠ¤ ìˆ˜ì§‘ ë° ë Œë”ëŸ¬ ì œì‘
    * NVIDIA Emerald Square City Scene, Unity Asset Store ë“± í™œìš©í•´ ê³µê°œëœ ë¦¬ì†ŒìŠ¤ ìˆ˜ì§‘
     ![FPS_61-RELEASE2024-07-0511-15-22-ezgif com-optimize](https://github.com/ksg1766/Navigation_System/assets/37239034/7838276b-012f-407d-94a9-8cb1936b0502)

    * ë¦¬ì†ŒìŠ¤ ë°ì´í„° ë°”ì´ë„ˆë¦¬ ê²½ëŸ‰í™”
    * ë Œë”ëŸ¬ ì œì‘
  * ë„¤ë¹„ê²Œì´ì…˜ ì‘ì—… íˆ´ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤.
    * Slopeì— ë”°ë¼ ë©”ì‰¬ ì‚¼ê°í˜• ì¶”ë ¤ë‚´ì–´ ë¡œë“œ (í…ŒìŠ¤íŠ¸ ëª¨ë¸)
    * ![FPS_61-RELEASE2024-07-0511-13-04-ezgif com-speed](https://github.com/ksg1766/Navigation_System/assets/37239034/aeee1ca8-6602-424e-b051-9fd0aeda2c5b)
  * Slopeë¡œ ì§€í˜• ì •ì  ì¶”ë ¤ë‚¸ í›„ì— Delaunay Triangulation ì´ìš©í•œ ì‚¼ê°í˜• ì§‘í•© êµ¬ì„±í•˜ë„ë¡ êµ¬í˜„í•´ ë³´ë ¤ í•©ë‹ˆë‹¤.
---
# ğŸ“… 2024.07.03
:clipboard: ì§„í–‰ ì‚¬í•­
  * ë…¼ë¬¸ ë¶„ì„ ë° í•™ìŠµ
    * A navigation mesh for dynamic environments, Wouter van Toll et al.
    * Automatic Generated Navigation Mesh Algorithm on 3D Game Scene, Xiang Xu et al.
    * ìœ„ ìë£Œ ê¸°ë°˜ìœ¼ë¡œ Roughí•˜ê²Œ ì•„ë˜ì™€ ê°™ì´ êµ¬ìƒí–ˆìŠµë‹ˆë‹¤.
      1. ì§€í˜• ë©”ì‰¬ì˜ ì •ì  ì§‘í•©ê³¼ Delaunay Triangulation ì´ìš©í•´ ì‚¼ê°í˜• ì§‘í•© êµ¬ì„±.
      2. ìƒì„±ëœ ì‚¼ê°í˜• ì§‘í•© ì´ìš©í•´ Voronoi Diagram ìƒì„±
      3. Diagram í™•ì¥í•´ ìµœì´ˆ Navigation Mesh ìƒì„±.
      4. ì´í›„ ì¥ì• ë¬¼ ì¶”ê°€, ì‚­ì œ ë“±ìœ¼ë¡œ ì¸í•œ NavMesh ê°±ì‹ ì€ ë…¼ë¬¸ ì°¸ê³ í•´ Voronoi Diagram ìˆ˜ì •.
      5. Voronoi Diagram Or ê°€ì‹œì„± ê²€ì‚¬ ë“± ê²½ë¡œ íƒìƒ‰ ìˆ˜í–‰.
    * ë¦¬ì†ŒìŠ¤ ìˆ˜ì§‘ ë° ë Œë”ëŸ¬ ì œì‘ ì‹œì‘
      * í…ŒìŠ¤íŠ¸ìš© ì§€í˜• ë¦¬ì†ŒìŠ¤ ìˆ˜ì§‘ ì¤‘ì…ë‹ˆë‹¤.

---
# ğŸ“… 2024.07.02
:bulb: ê³¼ì œ ì„ ì • (GI â†’ Navigation System ë³€ê²½)
 * __Dynamic Navigation Mesh ìë™ ìƒì„± ì‹œìŠ¤í…œ & Path Finding êµ¬í˜„.__
 * Recast & Detourì™€ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  Dynamic í™˜ê²½ì—ì„œ Navigation Mesh ìë™ ìƒì„± ë° ë¹ ë¥¸ ê°±ì‹ , ê²½ë¡œ íƒìƒ‰ ê¸°ëŠ¥ êµ¬í˜„ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

:soccer: ëª©í‘œ
 * Static Envì—ì„œ Nav Mesh ìƒì„±
 * Dynamic Env ì¶”ê°€, ì‚­ì œì— ë”°ë¥¸ Nav Mesh ìˆ˜ì •
 * ê²½ë¡œ íƒìƒ‰

ğŸ”— ìë£Œ ìˆ˜ì§‘
 * [A navigation mesh for dynamic environments, Wouter van Toll et al.](https://www.researchgate.net/publication/236903107_A_Navigation_Mesh_for_Dynamic_Environments) (_í•´ë‹¹ ë…¼ë¬¸ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•  ê³„íšì…ë‹ˆë‹¤._)
 * [(slideshare)A navigation mesh for dynamic environments, Wouter van Toll et al.](https://www.slideshare.net/slideshow/a-navigation-meshfordynamicenvironments/55973757)
 * [Automatic Generated Navigation Mesh Algorithm on 3D Game Scene, Xiang Xu et al.](https://www.researchgate.net/publication/271406656_Automatic_Generated_Navigation_Mesh_Algorithm_on_3D_Game_Scene)
 * [Incremental Delaunay Triangulation, Dani Lischinski et al.](http://www.karlchenofhell.org/cppswp/lischinski.pdf)
 * [Navigation Meshes for Realistic Multi-Layered Environments, Wouter van Toll et al.](https://webspace.science.uu.nl/~gerae101/pdf/navmesh.pdf)
 * [Hierarchical Path-Finding for Navigation Meshes (HNA*), Nuria Pelechano et al.](https://upcommons.upc.edu/bitstream/handle/2117/98738/Pelechano_HNAstar_prePrint.pdf)
    
---
# ğŸ“… 2024.07.01
:bulb: ê³¼ì œ ì„ ì •
 * Global Illumination
